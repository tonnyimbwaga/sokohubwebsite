(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{37631:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var a=r(95155),s=r(11518),i=r.n(s),n=r(6874),l=r.n(n),o=r(66766),c=r(12115),d=r(316),u=r(10351),m=r(92835),g=r(59434);function p(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,g.cn)("animate-pulse rounded-md bg-gray-200",t),...r})}var h=r(40563);let f=()=>{let e=(0,c.useRef)(null),[t,r]=(0,c.useState)(!1),[s,n]=(0,c.useState)(!0),{data:g,isLoading:f,error:x}=(0,m.Ck)(),v=()=>{if(e.current){let{scrollLeft:t,scrollWidth:a,clientWidth:s}=e.current;r(t>0),n(t<a-s-10)}};(0,c.useEffect)(()=>(v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)),[g]);let b=t=>{if(e.current){let{scrollLeft:r,clientWidth:a}=e.current;e.current.scrollTo({left:"left"===t?r-a/2:r+a/2,behavior:"smooth"}),setTimeout(v,300)}},y=e=>(0,h.a)(e,{width:200,quality:75,bucket:"categories"});return x?null:(0,a.jsxs)("div",{className:"jsx-cca062bef7d99bd relative py-12 bg-gray-50 px-0 sm:px-4",children:[(0,a.jsxs)("div",{className:"jsx-cca062bef7d99bd container max-w-full px-0 sm:px-4",children:[(0,a.jsx)("h2",{className:"jsx-cca062bef7d99bd mb-8 text-xl sm:text-2xl font-bold px-4 sm:px-0",children:"Shop by Category"}),(0,a.jsxs)("div",{className:"jsx-cca062bef7d99bd relative",children:[t&&(0,a.jsx)(d.P.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>b("left"),className:"absolute -left-2 sm:-left-4 top-1/2 z-10 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-white shadow-lg transition-transform hover:scale-110","aria-label":"Scroll left",children:(0,a.jsx)(u.irw,{className:"text-2xl"})}),(0,a.jsx)("div",{ref:e,onScroll:v,className:"jsx-cca062bef7d99bd no-scrollbar flex snap-x snap-mandatory gap-3 sm:gap-6 overflow-x-auto scroll-smooth px-0 sm:px-4 -mx-4 sm:mx-0",children:f?Array.from({length:9}).map((e,t)=>(0,a.jsx)("div",{className:"jsx-cca062bef7d99bd shrink-0 snap-start",children:(0,a.jsxs)("div",{className:"jsx-cca062bef7d99bd group relative flex flex-col items-center",children:[(0,a.jsx)(p,{className:"h-32 w-32 sm:h-40 sm:w-40 rounded-full"}),(0,a.jsx)(p,{className:"mt-4 h-6 w-24 sm:w-32"})]})},t)):null==g?void 0:g.map(e=>(0,a.jsx)(l(),{href:"/category/".concat(e.slug),className:"shrink-0 snap-start",style:{width:"140px",flex:"0 0 140px"},children:(0,a.jsxs)(d.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"group relative flex flex-col items-center",children:[(0,a.jsx)("div",{className:"jsx-cca062bef7d99bd relative h-32 w-32 sm:h-40 sm:w-40 overflow-hidden rounded-full ring-4 ring-white shadow-lg transition-all duration-300 group-hover:ring-primary/20 group-hover:shadow-xl",children:(0,a.jsx)(o.default,{src:y(e.image_url),alt:e.name,width:128,height:128,className:"h-full w-full object-cover transition-all duration-300 group-hover:scale-110 group-hover:brightness-110",loading:"lazy",unoptimized:!0})}),(0,a.jsx)("h3",{className:"jsx-cca062bef7d99bd mt-4 text-center font-normal text-base sm:font-medium sm:text-lg text-gray-900 transition-colors duration-300 group-hover:text-primary",children:e.name})]})},e.id))}),s&&(0,a.jsx)(d.P.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>b("right"),className:"absolute -right-2 sm:-right-4 top-1/2 z-10 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full bg-white shadow-lg transition-transform hover:scale-110","aria-label":"Scroll right",children:(0,a.jsx)(u.fOo,{className:"text-2xl"})})]})]}),(0,a.jsx)(i(),{id:"cca062bef7d99bd",children:".no-scrollbar.jsx-cca062bef7d99bd{-ms-overflow-style:none;scrollbar-width:none}.no-scrollbar.jsx-cca062bef7d99bd::-webkit-scrollbar{display:none}"})]})}},43246:(e,t,r)=>{Promise.resolve().then(r.bind(r,54624)),Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,54675)),Promise.resolve().then(r.bind(r,53810)),Promise.resolve().then(r.bind(r,79140)),Promise.resolve().then(r.bind(r,48119)),Promise.resolve().then(r.bind(r,37631)),Promise.resolve().then(r.bind(r,97186))},53810:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(95155),s=r(12115),i=r(52643),n=r(96602),l=r(68261),o=r(40563);let c={title:"Featured Products",description:"Handpicked selections just for you"},d=()=>{let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{d(!0),m(null);try{var e;let{error:r}=await i.N.from("products").select("id").limit(1);if(null==r||null==(e=r.message)?void 0:e.includes("does not exist")){m("Store is being set up. Please check back soon."),d(!1);return}let{data:a,error:s}=await i.N.from("products").select("\n            id,\n            name,\n            description,\n            price,\n            compare_at_price,\n            stock,\n            status,\n            is_featured,\n            featured_order,\n            sku,\n            slug,\n            category_id,\n            images,\n            categories:categories(name, slug)\n          ").eq("status","active").eq("is_featured",!0).order("featured_order",{ascending:!0}).order("created_at",{ascending:!1}).limit(12);if(s){m("Unable to load featured products at this time."),d(!1);return}if(a&&0!==a.length){let e=a.map((e,t)=>{var r,a;return{id:e.id,name:e.name,description:e.description,price:e.price,salePrice:e.compare_at_price||void 0,images:Array.isArray(e.images)?e.images.map(e=>(0,o.a)(e)).filter(Boolean).map(e=>({url:e})):[{url:"/images/placeholder.png"}],sku:e.sku,slug:e.slug||e.sku.toLowerCase(),category:(null==(r=e.categories)?void 0:r.name)||"",categorySlug:(null==(a=e.categories)?void 0:a.slug)||"",ageRange:"",inStock:e.stock>0,isFeatured:e.is_featured||!1,rating:5,reviews:0,index:t+1}});t(e)}else t([])}catch(e){m("Something went wrong. Please try again later.")}finally{d(!1)}})()},[]),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)(l.A,{title:c.title,description:c.description}),(0,a.jsxs)("div",{className:"mt-8",children:[r&&(0,a.jsx)("div",{className:"text-center text-gray-500",children:"Loading featured products..."}),u&&(0,a.jsxs)("div",{className:"text-center text-red-500",children:["Error: ",u]}),!r&&!u&&0===e.length&&(0,a.jsx)("div",{className:"text-center text-gray-500",children:"No featured products available at the moment."}),!r&&!u&&e.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"block sm:hidden -mx-4 px-4 overflow-x-auto no-scrollbar",children:(0,a.jsx)("div",{className:"flex gap-4",children:e.map((e,t)=>(0,a.jsx)("div",{className:"min-w-[48vw] max-w-[60vw]",children:(0,a.jsx)(n.default,{product:e,priority:t<2})},e.id))})}),(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:e.map((e,t)=>(0,a.jsx)(n.default,{product:e,priority:t<6},e.id))})})]})]})]})}},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i,v:()=>n});var a=r(52596),s=r(39688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-GB",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"KES";return new Intl.NumberFormat(t,{style:"currency",currency:r}).format(e)}},92835:(e,t,r)=>{"use strict";r.d(t,{Ck:()=>l});var a=r(19373),s=r(52643);function i(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,50)}let n={async getCategoryBySlug(e){let{data:t,error:r}=await s.N.from("categories").select("\n        id,\n        name,\n        slug,\n        description,\n        image_url,\n        is_active\n      ").eq("slug",e).eq("is_active",!0).single();if(r||!t)return null;let{data:a,error:i}=await s.N.from("product_categories").select("\n        product:products(\n          id,\n          name,\n          slug,\n          price,       // Leaner selection for category product list\n          images,\n          is_featured\n        )\n      ").eq("category_id",t.id).eq("products.is_published",!0);if(i)return t;let n=(a?a.map(e=>e&&"object"==typeof e&&void 0!==e.product?e.product:null):[]).filter(e=>null!==e);return{...t,products:n}},async getCategories(){let{data:e,error:t}=await s.N.from("categories").select("\n        id,\n        name,\n        slug,\n        description,\n        image_url,\n        is_active\n      ").eq("is_active",!0).order("name");return t?null:e},async getCategoriesWithCount(){let{data:e,error:t}=await s.N.rpc("get_categories_with_product_counts");return t?null:e},async createCategory(e){let t=i(e.name),r=e.name,a=e.description||e.name,{data:n,error:l}=await s.N.from("categories").insert({...e,slug:t,meta_title:r,meta_description:a}).select("\n        id,\n        name,\n        slug,\n        description,\n        image_url,\n        is_active\n      ").single();return l?null:n},async updateCategory(e,t){let r=t.name?i(t.name):void 0,{data:a,error:n}=await s.N.from("categories").update({...t,...t.name?{slug:r,meta_title:t.name,meta_description:t.description||t.name}:{},updated_at:new Date().toISOString()}).eq("id",e).select("\n        id,\n        name,\n        slug,\n        description,\n        image_url,\n        is_active\n      ").single();return n?null:a}};function l(){return(0,a.I)({queryKey:["categories"],queryFn:()=>n.getCategories(),staleTime:864e5,gcTime:6048e5,refetchOnMount:!1,refetchOnWindowFocus:!1})}},97186:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(95155);let s=(0,r(55028).default)(()=>Promise.all([r.e(8087),r.e(9309)]).then(r.bind(r,59309)),{loadableGenerated:{webpack:()=>[59309]},loading:()=>(0,a.jsx)("div",{className:"h-48 sm:h-64 bg-gray-100 animate-pulse rounded-xl my-7"}),ssr:!1});function i(){return(0,a.jsx)(s,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[844,4982,6874,3063,316,9373,6972,4277,1487,2998,6602,1948,8441,1684,7358],()=>t(43246)),_N_E=e.O()}]);