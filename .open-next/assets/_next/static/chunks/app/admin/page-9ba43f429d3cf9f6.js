(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{12270:(e,t,s)=>{"use strict";var r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,l=(e,t,s)=>new Promise((r,a)=>{var i=e=>{try{l(s.next(e))}catch(e){a(e)}},n=e=>{try{l(s.throw(e))}catch(e){a(e)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())}),c={};((e,t)=>{for(var s in t)r(e,s,{get:t[s],enumerable:!0})})(c,{SessionContextProvider:()=>m,useSession:()=>p,useSessionContext:()=>h,useSupabaseClient:()=>u,useUser:()=>y}),e.exports=((e,t,s,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of i(t))n.call(e,s)||void 0===s||r(e,s,{get:()=>t[s],enumerable:!(l=a(t,s))||l.enumerable});return e})(r({},"__esModule",{value:!0}),c);var d=s(12115),o=s(95155),x=(0,d.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),m=({supabaseClient:e,initialSession:t=null,children:s})=>{let[r,a]=(0,d.useState)(t),[i,n]=(0,d.useState)(!t),[c,m]=(0,d.useState)();(0,d.useEffect)(()=>{!r&&t&&a(t)},[r,t]),(0,d.useEffect)(()=>{let t=!0;return!function(){l(this,null,function*(){let{data:{session:s},error:r}=yield e.auth.getSession();if(t){if(r){m(r),n(!1);return}a(s),n(!1)}})}(),()=>{t=!1}},[]),(0,d.useEffect)(()=>{let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&a(t),"SIGNED_OUT"===e&&a(null)});return()=>{t.unsubscribe()}},[]);let h=(0,d.useMemo)(()=>i?{isLoading:!0,session:null,error:null,supabaseClient:e}:c?{isLoading:!1,session:null,error:c,supabaseClient:e}:{isLoading:!1,session:r,error:null,supabaseClient:e},[i,r,c]);return(0,o.jsx)(x.Provider,{value:h,children:s})},h=()=>{let e=(0,d.useContext)(x);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function u(){let e=(0,d.useContext)(x);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var p=()=>{let e=(0,d.useContext)(x);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},y=()=>{var e,t;let s=(0,d.useContext)(x);if(void 0===s)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=s.session)?void 0:e.user)?t:null}},52643:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});var r=s(34982);let a=async(e,t)=>{let{timeout:s=3e4}=t||{},r=new AbortController,a=setTimeout(()=>r.abort(),s),i=await fetch(e,{...t,signal:r.signal});return clearTimeout(a),i},i=(0,r.UU)("https://tafojbtftmihrheeyoky.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRhZm9qYnRmdG1paHJoZWV5b2t5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ3Mzk3MTYsImV4cCI6MjA2MDMxNTcxNn0.vdL2odCYREv1GykTt8wx76lmhaHmDkBYcC65L4Z_vXo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{fetch:a}})},52767:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(95155),a=s(12270),i=s(73579);function n(e){let{children:t,initialSession:s}=e,n=(0,i.createClientComponentClient)();return(0,r.jsx)(a.SessionContextProvider,{supabaseClient:n,initialSession:s,children:t})}},69379:(e,t,s)=>{Promise.resolve().then(s.bind(s,52767)),Promise.resolve().then(s.bind(s,73390))},73390:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var r=s(95155),a=s(21716),i=s(26715);function n(e){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e)}var l=s(6874),c=s.n(l),d=s(10351),o=s(19373),x=s(52643);function m(e){let{recentProducts:t,categories:s}=e,{data:a=[]}=(0,o.I)({queryKey:["orders"],queryFn:async()=>{let{data:e,error:t}=await x.N.from("order_submissions").select("id, customer_name, customer_phone, customer_email, delivery_location, items, total, status, notes, created_at, updated_at").order("created_at",{ascending:!1});return t?[]:e||[]}});return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,r.jsx)("div",{className:"rounded-lg bg-white p-6 shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.X3y,{className:"h-12 w-12 text-primary"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),(0,r.jsx)("h3",{className:"text-2xl font-bold",children:t.length})]})]})}),(0,r.jsx)("div",{className:"rounded-lg bg-white p-6 shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.y52,{className:"h-12 w-12 text-primary"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Orders"}),(0,r.jsx)("h3",{className:"text-2xl font-bold",children:a.length})]})]})}),(0,r.jsx)("div",{className:"rounded-lg bg-white p-6 shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.QPV,{className:"h-12 w-12 text-primary"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Categories"}),(0,r.jsx)("h3",{className:"text-2xl font-bold",children:s.length})]})]})})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow mb-8",children:[(0,r.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17a2 2 0 002 2h6a2 2 0 002-2V7a2 2 0 00-2-2h-6a2 2 0 00-2 2v10zm-6 4a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h2z"})}),"Google Analytics"]})}),(0,r.jsx)("p",{className:"mb-4 text-gray-600",children:"View your site analytics and traffic reports in your Google Analytics dashboard."}),(0,r.jsx)("a",{href:"https://analytics.google.com/analytics/web/",target:"_blank",rel:"noopener noreferrer",className:"inline-block rounded bg-primary px-4 py-2 text-white font-medium hover:bg-primary/80 transition-colors",children:"Open Google Analytics"})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Products"}),(0,r.jsx)(c(),{href:"/admin/products",className:"text-sm font-medium text-primary hover:text-primary/80",children:"View all"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:n(e.price)})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 ".concat(e.is_published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.is_published?"Published":"Draft"})})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Orders"}),(0,r.jsx)(c(),{href:"/admin/orders",className:"text-sm font-medium text-primary hover:text-primary/80",children:"View all"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Customer Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Customer Phone"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Customer Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Delivery Location"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Total"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Created At"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.slice(0,5).map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.id})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_name})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_phone})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_email})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.delivery_location})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:n(e.total)})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"confirmed"===e.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.created_at})})]},e.id))})]})})]})]})}s(12115);let h=new a.E({defaultOptions:{queries:{staleTime:6e4,retry:1}}});function u(e){return(0,r.jsx)(i.Ht,{client:h,children:(0,r.jsx)(m,{...e})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[844,4982,6874,9373,3579,9013,8441,1684,7358],()=>t(69379)),_N_E=e.O()}]);