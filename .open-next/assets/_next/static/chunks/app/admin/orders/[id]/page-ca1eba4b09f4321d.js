(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3124],{26884:(e,t,s)=>{Promise.resolve().then(s.bind(s,66519))},35695:(e,t,s)=>{"use strict";s.r(t);var a=s(18999),r={};for(let e in a)"default"!==e&&(r[e]=()=>a[e]);s.d(t,r)},52643:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});var a=s(34982);let r=async(e,t)=>{let{timeout:s=3e4}=t||{},a=new AbortController,r=setTimeout(()=>a.abort(),s),i=await fetch(e,{...t,signal:a.signal});return clearTimeout(r),i},i=(0,a.UU)("https://tafojbtftmihrheeyoky.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRhZm9qYnRmdG1paHJoZWV5b2t5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ3Mzk3MTYsImV4cCI6MjA2MDMxNTcxNn0.vdL2odCYREv1GykTt8wx76lmhaHmDkBYcC65L4Z_vXo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{fetch:r}})},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i,v:()=>n});var a=s(52596),r=s(39688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-GB",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"KES";return new Intl.NumberFormat(t,{style:"currency",currency:s}).format(e)}},66519:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(95155),r=s(12115),i=s(35695),n=s(19373),l=s(52643),d=s(6874),c=s.n(d),o=s(80070),m=s(75517);let x=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),h=e=>{let t=u(e);return t.charAt(0).toUpperCase()+t.slice(1)},p=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},g=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var y={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:l="",children:d,iconNode:c,...o}=e;return(0,r.createElement)("svg",{ref:t,...y,width:a,height:a,stroke:s,strokeWidth:n?24*Number(i)/Number(a):i,className:p("lucide",l),...!d&&!g(o)&&{"aria-hidden":"true"},...o},[...c.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),j=((e,t)=>{let s=(0,r.forwardRef)((s,a)=>{let{className:i,...n}=s;return(0,r.createElement)(f,{ref:a,iconNode:t,className:p("lucide-".concat(x(h(e))),"lucide-".concat(e),i),...n})});return s.displayName=h(e),s})("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var N=s(66766),v=s(59434);function b(e){let{isOpen:t,onClose:s,item:r}=e;return r?(0,a.jsxs)(m.lG,{open:t,onClose:s,className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,a.jsxs)(m.lG.Panel,{className:"mx-auto max-w-md rounded-lg bg-white p-6 shadow-xl relative",children:[(0,a.jsxs)("button",{type:"button",className:"absolute right-4 top-4 rounded-md text-gray-400 hover:text-gray-500",onClick:s,children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)(j,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,a.jsx)("div",{className:"sm:flex sm:items-start",children:(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[(0,a.jsx)(m.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:r.name}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-100",children:r.image?(0,a.jsx)(N.default,{src:r.image,alt:r.name,width:400,height:400,className:"h-full w-full object-cover object-center"}):(0,a.jsx)("div",{className:"h-full w-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No image"})})}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Price:"})," ",(0,v.v)(r.price)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Quantity:"})," ",r.quantity]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total:"})," ",(0,v.v)(r.price*r.quantity)]}),r.description&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Description:"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:r.description})]}),r.options&&Object.keys(r.options).length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Options:"}),(0,a.jsx)("ul",{className:"text-sm text-gray-500",children:Object.entries(r.options).map(e=>{let[t,s]=e;return(0,a.jsxs)("li",{children:[t,": ",String(s)]},t)})})]})]})]})]})}),(0,a.jsx)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:(0,a.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:s,children:"Close"})})]})})]}):null}function w(){var e,t,s;let[d,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),h=(0,i.useParams)(),p="string"==typeof(null==h?void 0:h.id)?h.id:null,{data:g,isLoading:y}=(0,n.I)({queryKey:["order",p],queryFn:async()=>{if(!p)throw Error("Order ID is required");let{data:e,error:t}=await l.N.from("orders").select("id, customer_name, phone, delivery_zone, location, items, total, status, created_at, mpesa_phone_number, mpesa_transaction_code, is_immediate_payment, discount_percentage, original_amount, discounted_amount, payment_status, payment_date, order_confirmed, order_confirmation_date").eq("id",p).single();if(t)throw t;return e}});if(y)return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded mb-4"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 w-full bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 w-3/4 bg-gray-200 rounded"})]})]})});if(!g)return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Order not found"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"The order you're looking for doesn't exist."}),(0,a.jsx)(c(),{href:"/admin/orders",className:"mt-4 inline-block text-primary hover:underline",children:"Back to Orders"})]})});let f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=e.split(" ");return s.length>t?s.slice(0,t).join(" ")+"...":e};return(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(c(),{href:"/admin/orders",className:"text-primary hover:underline mb-4 inline-flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Orders"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mt-2",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Order #",g.id.slice(0,8)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:g.status.charAt(0).toUpperCase()+g.status.slice(1)}),(0,a.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat("paid"===g.payment_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:g.payment_status?"".concat(g.payment_status.charAt(0).toUpperCase()).concat(g.payment_status.slice(1)):"Pending"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:new Date(g.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Summary"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Order Date"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(g.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Order ID"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:g.id})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Order Status"}),(0,a.jsx)("dd",{className:"mt-1",children:(0,a.jsx)(o.A,{orderId:g.id,currentStatus:g.status,type:"status",options:[{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],className:"w-full sm:w-auto rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary"})})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Payment Status"}),(0,a.jsxs)("dd",{className:"mt-1",children:[(0,a.jsx)(o.A,{orderId:g.id,currentStatus:g.payment_status||"pending",type:"paymentStatus",options:[{value:"pending",label:"Pending"},{value:"paid",label:"Paid"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"},{value:"refunded",label:"Refunded"}],className:"w-full sm:w-auto rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary"}),g.payment_date&&(0,a.jsxs)("span",{className:"block sm:inline-block mt-1 sm:mt-0 sm:ml-2 text-xs text-gray-500",children:["on ",new Date(g.payment_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900",children:g.is_immediate_payment&&g.discount_percentage&&g.discount_percentage>0?(0,a.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,a.jsxs)("span",{className:"line-through text-gray-500 text-base",children:["KES ",null==(e=g.original_amount)?void 0:e.toFixed(2)]}),(0,a.jsxs)("span",{className:"text-primary",children:["KES ",null==(t=g.discounted_amount)?void 0:t.toFixed(2)]}),(0,a.jsxs)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-0.5 rounded-full font-medium",children:[g.discount_percentage,"% OFF"]})]}):"KES ".concat(g.total.toFixed(2))})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["Order Items (",(null==(s=g.items)?void 0:s.length)||0,")"]})}),(0,a.jsxs)("div",{className:"p-0 sm:p-2 md:p-4",children:[(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.items&&Array.isArray(g.items)&&g.items.map((e,t)=>{var s;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.image&&(0,a.jsx)("div",{className:"flex-shrink-0 h-12 w-12 mr-3",children:(0,a.jsx)("img",{className:"h-12 w-12 rounded-md object-cover",src:e.image,alt:e.name})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:"/products/".concat(e.slug||e.id),target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-gray-900 hover:text-primary transition-colors truncate block",style:{maxWidth:"250px"},title:e.name,onClick:e=>e.stopPropagation(),children:e.name}),e.variant&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.variant})]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-right",children:["KES ",null==(s=e.price)?void 0:s.toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-center",children:e.quantity}),(0,a.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 font-medium text-right",children:["KES ",(e.price*e.quantity).toFixed(2)]})]},e.id||t)})}),g.is_immediate_payment&&g.discount_percentage&&g.discount_percentage>0&&g.original_amount&&g.discounted_amount&&(0,a.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:3,className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:"Subtotal"}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-sm font-medium text-gray-800",children:["KES ",g.original_amount.toFixed(2)]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{colSpan:3,className:"px-4 py-3 text-right text-sm font-medium text-green-600",children:["Discount (",g.discount_percentage,"%)"]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-sm font-medium text-green-600",children:["- KES ",(g.original_amount-g.discounted_amount).toFixed(2)]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:3,className:"px-4 py-3 text-right text-base font-bold text-gray-700",children:"Grand Total"}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-base font-bold text-gray-900",children:["KES ",g.discounted_amount.toFixed(2)]})]})]})]})}),(0,a.jsxs)("div",{className:"block sm:hidden space-y-3 p-4",children:[g.items&&Array.isArray(g.items)&&g.items.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[e.image&&(0,a.jsx)("img",{className:"h-16 w-16 rounded-md object-cover flex-shrink-0",src:e.image,alt:e.name}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("a",{href:"/products/".concat(e.slug||e.id),target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-gray-800 hover:text-primary transition-colors block",title:e.name,children:f(e.name,5)}),e.variant&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.variant}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Unit Price: KES ",null==(s=e.price)?void 0:s.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Quantity: ",(0,a.jsx)("span",{className:"font-medium text-gray-800",children:e.quantity})]}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800",children:["KES ",(e.price*e.quantity).toFixed(2)]})]})]},e.id||t)}),g.is_immediate_payment&&g.discount_percentage&&g.discount_percentage>0&&g.original_amount&&g.discounted_amount&&(0,a.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,a.jsxs)("span",{className:"text-gray-800 font-medium",children:["KES ",g.original_amount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-600 mb-1",children:[(0,a.jsxs)("span",{className:"font-medium",children:["Discount (",g.discount_percentage,"%):"]}),(0,a.jsxs)("span",{className:"font-medium",children:["- KES ",(g.original_amount-g.discounted_amount).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-base font-bold mt-2",children:[(0,a.jsx)("span",{className:"text-gray-700",children:"Grand Total:"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["KES ",g.discounted_amount.toFixed(2)]})]})]})]})]})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Customer & Shipping Information"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("dl",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"pb-4 border-b border-gray-100",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Customer Name"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:g.customer_name||"Guest"})]}),(0,a.jsxs)("div",{className:"pb-4 border-b border-gray-100",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Contact Information"}),(0,a.jsxs)("dd",{className:"mt-1 text-sm text-gray-900",children:[g.phone||"Not provided",g.mpesa_phone_number&&g.mpesa_phone_number!==g.phone&&(0,a.jsxs)("div",{className:"mt-1 text-sm text-gray-500",children:["M-Pesa: ",g.mpesa_phone_number]}),g.mpesa_transaction_code&&(0,a.jsxs)("div",{className:"mt-1 text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Transaction:"})," ",(0,a.jsx)("span",{className:"font-mono text-gray-900",children:g.mpesa_transaction_code})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Shipping Address"}),(0,a.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 space-y-1",children:[g.location&&(0,a.jsx)("div",{children:g.location}),g.delivery_zone&&(0,a.jsxs)("div",{className:"text-gray-600",children:[g.delivery_zone," Zone"]}),!g.location&&!g.delivery_zone&&(0,a.jsx)("div",{className:"text-gray-500 italic",children:"No shipping information provided"})]})]})]})})]})})]}),(0,a.jsx)(b,{isOpen:x,onClose:()=>{u(!1)},item:d})]})}},66766:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(71469),r=s.n(a)},71469:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return d},getImageProps:function(){return l}});let a=s(38466),r=s(38883),i=s(33063),n=a._(s(51193));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let d=i.Image},80070:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(95155),r=s(12115),i=s(35695),n=s(78260);function l(e){let{orderId:t,currentStatus:s,type:l,options:d,className:c=""}=e,[o,m]=(0,r.useState)(s),[x,u]=(0,r.useState)(!1),h=(0,i.useRouter)();(0,r.useEffect)(()=>{m(s)},[s]);let p=async e=>{if(e!==s){u(!0);try{if(!(await fetch("/api/admin/orders/".concat(t,"/").concat(l),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok)throw Error("Failed to update status");m(e),h.refresh(),n.oR.success("Order ".concat("status"===l?"status":"payment status"," updated successfully"))}catch(e){n.oR.error("Failed to update status"),m(s)}finally{u(!1)}}};return(0,a.jsx)("select",{value:o,onChange:e=>p(e.target.value),disabled:x,className:"px-3 py-1 border rounded-md bg-white text-sm ".concat(c," ").concat(x?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4982,6874,3063,9373,8260,4277,5517,8441,1684,7358],()=>t(26884)),_N_E=e.O()}]);