"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6602],{24102:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(95155),r=a(12115),i=a(66766);function l(e){let{src:t,alt:a,width:l=800,height:n,className:o="",loading:c="lazy",quality:d=75,priority:u=!1,preload:h=!1,sizes:m,placeholder:x="blur",blurDataURL:p}=e,[g,f]=(0,r.useState)(!0),[w,v]=(0,r.useState)(!1),y="object"==typeof t&&null!==t&&"src"in t?t.src:t;(0,r.useEffect)(()=>{if(!h||!y||"undefined"==typeof document)return;let e=document.createElement("link");return e.rel="preload",e.as="image",e.href=y,e.fetchPriority="high",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[y,h]);let b=(0,r.useCallback)(()=>{f(!1)},[]),j=(0,r.useCallback)(()=>{v(!0),f(!1)},[y]);return(0,s.jsxs)("div",{className:"relative w-full h-full overflow-hidden bg-gray-100",children:[(0,s.jsx)(i.default,{src:y,alt:a,width:l,height:n||Math.round(.75*l),className:"\n          transition-all duration-500\n          ".concat(g?"opacity-0 scale-95":"opacity-100 scale-100","\n          ").concat(o,"\n        "),loading:u?"eager":c,priority:u,quality:d,sizes:m||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",placeholder:x,blurDataURL:p||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2P4z8DwHwAFgwJ/lwQn1wAAAABJRU5ErkJggg==",onLoad:b,onError:j,style:{backgroundColor:g?"#f3f4f6":void 0}}),w&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,s.jsx)("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"})})})]})}},40563:(e,t,a)=>{a.d(t,{a:()=>i});let s="/images/placeholder.png",r="https://tafojbtftmihrheeyoky.supabase.co";function i(e,t){let a;if(!e||("string"==typeof e?a=e:e&&"object"==typeof e&&(a=e.web_image_url||e.web_optimized_image_url||e.feed_image_url||e.url||e.src),!a))return s;if(a.startsWith("http")||a.startsWith("/"))return a;let i=(null==t?void 0:t.bucket)||"product-images";return a.includes("../")||a.includes("..\\")?s:r?"".concat(r,"/storage/v1/object/public/").concat(i,"/").concat(a):"/".concat(i,"/").concat(a)}},61569:(e,t,a)=>{a.d(t,{_:()=>n,e:()=>l});var s=a(95155),r=a(12115);let i=(0,r.createContext)({items:[],addToCart:()=>{},removeFromCart:()=>{},updateQuantity:()=>{},clearCart:()=>{},total:0,itemCount:0,isCartLoading:!0});function l(e){let{children:t}=e,[a,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("cart");e&&l(JSON.parse(e)),o(!0)}catch(e){o(!0)}},[]),(0,r.useEffect)(()=>{if(n)try{localStorage.setItem("cart",JSON.stringify(a));let e=new Date;e.setDate(e.getDate()+7),localStorage.setItem("cartExpiration",e.toISOString())}catch(e){}},[a,n]);let c=a.reduce((e,t)=>e+t.price*t.quantity,0),d=a.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(i.Provider,{value:{items:a,addToCart:e=>{l(t=>t.find(t=>t.id===e.id&&t.selectedSize===e.selectedSize)?t.map(t=>t.id===e.id&&t.selectedSize===e.selectedSize?{...t,quantity:t.quantity+e.quantity}:t):[...t,e])},removeFromCart:e=>{l(t=>t.filter(t=>t.id!==e))},updateQuantity:(e,t)=>{l(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{l([]);try{localStorage.removeItem("cart"),localStorage.removeItem("cartExpiration")}catch(e){}},total:c,itemCount:d,isCartLoading:!n},children:t})}function n(){return(0,r.useContext)(i)}},96602:(e,t,a)=>{a.d(t,{default:()=>g});var s=a(95155),r=a(12115),i=a(316),l=a(51251),n=a(53441);let o=e=>{let{children:t}=e;return(0,s.jsx)(l.F,{features:n.l,children:t})};var c=a(24102),d=a(6865),u=a(57859),h=a(61569),m=a(40563);function x(e){return"/products/".concat(encodeURIComponent(e.slug))}var p=a(56671);let g=e=>{var t,l,n;let{product:g,className:f="",showIndex:w=!1,priority:v=!1}=e,y=(0,m.a)(null==(t=g.images)?void 0:t[0]),[b,j]=(0,r.useState)("idle"),{addToCart:C}=(0,h._)(),[A,N]=(0,r.useState)(!1),S=(null==(l=(n=a(35695)).useRouter)?void 0:l.call(n))||null;if(!g.slug)return null;let k=async e=>{var t,a,s;if(e.preventDefault(),e.stopPropagation(),"idle"!==b&&"success"!==b)return;j("loading");let r={...g,quantity:1,selectedSize:null!=(s=null==(a=g.sizes)||null==(t=a[0])?void 0:t.value)?s:void 0};try{await new Promise(e=>setTimeout(e,750)),C(r),j("success");let e=r.selectedSize?"".concat(g.name," (Size: ").concat(r.selectedSize,") added to cart!"):"".concat(g.name," added to cart!");p.oR.success(e),window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(100)}catch(e){j("idle"),p.oR.error("Could not add item to cart. Please try again.");return}setTimeout(()=>{j("idle")},2e3)},z=async e=>{A||(N(!0),setTimeout(()=>{S?S.push(x(g)):window.location.href=x(g)},120))};return(0,s.jsx)(o,{children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"group relative rounded-xl bg-white p-3 shadow-sm transition-all hover:shadow-md ".concat(f," ").concat(A?"pointer-events-none opacity-70":""),whileTap:{scale:.97},onClick:z,role:"button",tabIndex:0,"aria-label":"View details for ".concat(g.name),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&z(e)},children:[A&&(0,s.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-white/70 rounded-xl",children:(0,s.jsxs)("svg",{className:"animate-spin h-8 w-8 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,s.jsxs)("div",{className:"block",children:[(0,s.jsxs)("div",{className:"relative aspect-square overflow-hidden rounded-lg bg-gray-100",children:[w&&"index"in g&&(0,s.jsxs)("div",{className:"absolute top-0 left-0 z-10 w-12 h-12 flex items-center justify-center",children:[(0,s.jsxs)("svg",{width:"42",height:"36",viewBox:"0 0 28 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M14 3C14 3 10 6 10 9.5C10 11.5 11 13 14 13C17 13 18 11.5 18 9.5C18 6 14 3 14 3Z",fill:"#76D7D7"}),(0,s.jsx)("path",{d:"M14 3C14 3 18 6 18 9.5C18 11.5 17 13 14 13C11 13 10 11.5 10 9.5C10 6 14 3 14 3Z",fill:"#59B5B5"}),(0,s.jsx)("path",{d:"M14 5C14 5 8 9 8 13C8 16.5 11 19 14 19C17 19 20 16.5 20 13C20 9 14 5 14 5Z",fill:"#76D7D7"}),(0,s.jsx)("path",{d:"M14 5C20 9 20 13 20 13C20 16.5 17 19 14 19C17 19 20 16.5 20 13C20 9 14 5 14 5Z",fill:"#59B5B5",fillOpacity:"0.8"})]}),(0,s.jsx)("span",{className:"absolute text-white font-extrabold text-lg left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 drop-shadow-sm",children:g.index})]}),g.salePrice&&g.price>g.salePrice&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 z-10 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-md",children:[Math.round((g.price-g.salePrice)/g.price*100),"% OFF"]}),(0,s.jsx)(c.A,{src:y,alt:g.name,width:400,height:400,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",priority:v,loading:v?"eager":"lazy",quality:v?90:75,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-110"})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-normal sm:font-medium text-gray-900 group-hover:text-primary transition-colors duration-200 truncate sm:truncate-none",children:g.name}),(0,s.jsx)("div",{className:"flex flex-col",children:g.salePrice&&g.price>g.salePrice?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-base sm:text-lg font-normal sm:font-bold text-primary",children:["KSh ",g.salePrice.toLocaleString()]}),(0,s.jsxs)("span",{className:"text-sm line-through ".concat((null==f?void 0:f.includes("best-deals-card"))?"text-gray-300/70":"text-gray-500"),children:["KSh ",g.price.toLocaleString()]})]}):(0,s.jsxs)("span",{className:"text-base sm:text-lg font-normal sm:font-bold text-primary",children:["KSh ",g.price.toLocaleString()]})}),(0,s.jsx)("div",{className:"pt-2 max-h-14 opacity-100 lg:max-h-0 lg:opacity-0 group-hover:lg:max-h-14 group-hover:lg:opacity-100 transition-all duration-300 ease-in-out overflow-hidden",children:(0,s.jsx)(i.P.button,{onClick:k,disabled:"loading"===b,className:"relative w-full min-h-[48px]\n                  flex items-center justify-center gap-2\n                  py-3 px-4 rounded-full\n                  text-[15px] font-medium tracking-wide\n                  shadow-sm active:shadow-none\n                  transition-all duration-200 ease-in-out \n                  focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50\n                  active:scale-[0.98] \n                  before:absolute before:inset-0 before:rounded-full before:bg-black/0 \n                  before:transition-colors before:duration-200\n                  active:before:bg-black/[0.12]\n                  disabled:before:bg-transparent\n                  ".concat("loading"===b||"success"===b?"cursor-not-allowed shadow-none":"hover:shadow-md active:translate-y-[1px]","\n                  ").concat("success"===b?"bg-green-500 text-white":"bg-primary text-white","\n                  disabled:opacity-60 disabled:cursor-not-allowed disabled:active:translate-y-0"),whileHover:"idle"===b?{scale:1.02}:{},whileTap:"idle"===b?{scale:.98}:{},children:(0,s.jsxs)("span",{className:"relative flex items-center justify-center gap-2",children:["loading"===b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(()=>(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),{}),(0,s.jsx)("span",{children:"Adding..."})]}),"success"===b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.P.span,{initial:{scale:0},animate:{scale:1},className:"flex items-center justify-center",children:(0,s.jsx)(d.A,{className:"h-5 w-5"})}),(0,s.jsx)("span",{children:"Added!"})]}),"idle"===b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Add to Cart"})]})]})})})]})]})]})})}}}]);