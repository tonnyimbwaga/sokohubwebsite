(()=>{var e={};e.id=3698,e.ids=[3698],e.modules={163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return s}});let s=r(71042).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var s=r(37413),i=r(61223),a=r(44999),n=r(47311),o=r(94623),l=r(39916);let d={title:"Admin Dashboard",description:"Toto Toys & Fun Admin Dashboard"};async function c(){let e=(0,a.UL)(),t=(0,i.createServerComponentClient)({cookies:()=>e}),{data:{session:r}}=await t.auth.getSession();if(!r?.user)return(0,l.notFound)();let{data:d}=await t.from("profiles").select("role").eq("id",r.user.id).single();if(d?.role!=="admin")return(0,l.notFound)();let[c,u]=await Promise.all([t.from("products").select("*").limit(5).order("created_at",{ascending:!1}),t.from("categories").select("*").limit(5).order("created_at",{ascending:!1})]);return(0,s.jsx)(o.default,{initialSession:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"mb-8 text-3xl font-bold",children:"Admin Dashboard"}),(0,s.jsx)(n.default,{recentProducts:c.data||[],categories:u.data||[]})]})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8246:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),a=r(88170),n=r.n(a),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"C:\\Projects\\toto-minimalist\\src\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"C:\\Projects\\toto-minimalist\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,33821)),"C:\\Projects\\toto-minimalist\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"C:\\Projects\\toto-minimalist\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"C:\\Projects\\toto-minimalist\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Projects\\toto-minimalist\\src\\app\\admin\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16629:(e,t,r)=>{Promise.resolve().then(r.bind(r,60125)),Promise.resolve().then(r.bind(r,37146))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37146:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(60687),i=r(51174),a=r(8693);function n(e){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e)}var o=r(85814),l=r.n(o),d=r(17019),c=r(29494),u=r(79481);function p({recentProducts:e,categories:t}){let{data:r=[]}=(0,c.I)({queryKey:["orders"],queryFn:async()=>{let{data:e,error:t}=await u.N.from("order_submissions").select("id, customer_name, customer_phone, customer_email, delivery_location, items, total, status, notes, created_at, updated_at").order("created_at",{ascending:!1});return t?[]:e||[]}});return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,s.jsx)("div",{className:"rounded-lg bg-white p-6 shadow",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.X3y,{className:"h-12 w-12 text-primary"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),(0,s.jsx)("h3",{className:"text-2xl font-bold",children:e.length})]})]})}),(0,s.jsx)("div",{className:"rounded-lg bg-white p-6 shadow",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.y52,{className:"h-12 w-12 text-primary"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Orders"}),(0,s.jsx)("h3",{className:"text-2xl font-bold",children:r.length})]})]})}),(0,s.jsx)("div",{className:"rounded-lg bg-white p-6 shadow",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.QPV,{className:"h-12 w-12 text-primary"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Categories"}),(0,s.jsx)("h3",{className:"text-2xl font-bold",children:t.length})]})]})})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow mb-8",children:[(0,s.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17a2 2 0 002 2h6a2 2 0 002-2V7a2 2 0 00-2-2h-6a2 2 0 00-2 2v10zm-6 4a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2h2z"})}),"Google Analytics"]})}),(0,s.jsx)("p",{className:"mb-4 text-gray-600",children:"View your site analytics and traffic reports in your Google Analytics dashboard."}),(0,s.jsx)("a",{href:"https://analytics.google.com/analytics/web/",target:"_blank",rel:"noopener noreferrer",className:"inline-block rounded bg-primary px-4 py-2 text-white font-medium hover:bg-primary/80 transition-colors",children:"Open Google Analytics"})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Products"}),(0,s.jsx)(l(),{href:"/admin/products",className:"text-sm font-medium text-primary hover:text-primary/80",children:"View all"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:n(e.price)})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${e.is_published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.is_published?"Published":"Draft"})})]},e.id))})]})})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Orders"}),(0,s.jsx)(l(),{href:"/admin/orders",className:"text-sm font-medium text-primary hover:text-primary/80",children:"View all"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Customer Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Customer Phone"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Customer Email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Delivery Location"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Created At"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:r.slice(0,5).map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.id})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_name})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_phone})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_email})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.delivery_location})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:n(e.total)})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${"pending"===e.status?"bg-yellow-100 text-yellow-800":"confirmed"===e.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.created_at})})]},e.id))})]})})]})]})}r(43210);let m=new i.E({defaultOptions:{queries:{staleTime:6e4,retry:1}}});function x(e){return(0,s.jsx)(a.Ht,{client:m,children:(0,s.jsx)(p,{...e})})}},39916:(e,t,r)=>{"use strict";var s=r(97576);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}})},47311:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\toto-minimalist\\\\src\\\\components\\\\Admin\\\\AdminDashboardClientWrapper.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\toto-minimalist\\src\\components\\Admin\\AdminDashboardClientWrapper.tsx","default")},48976:(e,t,r)=>{"use strict";function s(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return s}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let s=""+r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Object.defineProperty(Error(s),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=s,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70899:(e,t,r)=>{"use strict";function s(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return s}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,n.isNextRouterError)(t)||(0,a.isBailoutToCSRError)(t)||(0,l.isDynamicServerError)(t)||(0,o.isDynamicPostpone)(t)||(0,i.isPostpone)(t)||(0,s.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let s=r(68388),i=r(52637),a=r(51846),n=r(31162),o=r(84971),l=r(98479);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},74075:e=>{"use strict";e.exports=require("zlib")},74773:(e,t,r)=>{Promise.resolve().then(r.bind(r,94623)),Promise.resolve().then(r.bind(r,47311))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},86897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return n},getRedirectStatusCodeFromError:function(){return u},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return l},redirect:function(){return o}});let s=r(52836),i=r(49026),a=r(19121).actionAsyncStorage;function n(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let a=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",a}function o(e,t){var r;throw null!=t||(t=(null==a||null==(r=a.getStore())?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),n(e,t,s.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=i.RedirectType.replace),n(e,t,s.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function u(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},91645:e=>{"use strict";e.exports=require("net")},94623:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\toto-minimalist\\\\src\\\\app\\\\admin\\\\AdminClientProviders.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\toto-minimalist\\src\\app\\admin\\AdminClientProviders.tsx","default")},94735:e=>{"use strict";e.exports=require("events")},97576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return i.RedirectType},forbidden:function(){return n.forbidden},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let s=r(86897),i=r(49026),a=r(62765),n=r(48976),o=r(70899),l=r(163);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,3605,6945,5745,2347,4036,133],()=>r(8246));module.exports=s})();