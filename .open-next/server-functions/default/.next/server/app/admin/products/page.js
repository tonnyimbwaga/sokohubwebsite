(()=>{var e={};e.id=7575,e.ids=[7575],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37166:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var s=r(65239),i=r(48088),a=r(88170),l=r.n(a),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d={children:["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,38571)),"C:\\Projects\\toto-minimalist\\src\\app\\admin\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"C:\\Projects\\toto-minimalist\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,33821)),"C:\\Projects\\toto-minimalist\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"C:\\Projects\\toto-minimalist\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"C:\\Projects\\toto-minimalist\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["C:\\Projects\\toto-minimalist\\src\\app\\admin\\products\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},38571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\toto-minimalist\\\\src\\\\app\\\\admin\\\\products\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\toto-minimalist\\src\\app\\admin\\products\\page.tsx","default")},49005:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eM});var s=r(60687),i=r(43210),a=r(5745),l=r(29494),n=e=>"checkbox"===e.type,o=e=>e instanceof Date,d=e=>null==e;let u=e=>"object"==typeof e;var c=e=>!d(e)&&!Array.isArray(e)&&u(e)&&!o(e),m=e=>c(e)&&e.target?n(e.target)?e.target.checked:e.target.value:e,f=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,h=(e,t)=>e.has(f(t)),p=e=>{let t=e.constructor&&e.constructor.prototype;return c(t)&&t.hasOwnProperty("isPrototypeOf")},x="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function g(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(!(x&&(e instanceof Blob||e instanceof FileList))&&(r||c(e))))return e;else if(t=r?[]:{},r||p(e))for(let r in e)e.hasOwnProperty(r)&&(t[r]=g(e[r]));else t=e;return t}var y=e=>Array.isArray(e)?e.filter(Boolean):[],b=e=>void 0===e,v=(e,t,r)=>{if(!t||!c(e))return r;let s=y(t.split(/[,[\].]+?/)).reduce((e,t)=>d(e)?e:e[t],e);return b(s)||s===e?b(e[t])?r:e[t]:s},_=e=>"boolean"==typeof e;let j={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},w={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},N={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},S=i.createContext(null),k=()=>i.useContext(S);var C=(e,t,r,s=!0)=>{let i={defaultValues:t._defaultValues};for(let a in e)Object.defineProperty(i,a,{get:()=>(t._proxyFormState[a]!==w.all&&(t._proxyFormState[a]=!s||w.all),r&&(r[a]=!0),e[a])});return i},A=e=>c(e)&&!Object.keys(e).length,F=(e,t,r,s)=>{r(e);let{name:i,...a}=e;return A(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!s||w.all))},V=e=>Array.isArray(e)?e:[e],E=(e,t,r)=>!e||!t||e===t||V(e).some(e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e)));function R(e){let t=i.useRef(e);t.current=e,i.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var O=e=>"string"==typeof e,P=(e,t,r,s,i)=>O(e)?(s&&t.watch.add(e),v(r,e,i)):Array.isArray(e)?e.map(e=>(s&&t.watch.add(e),v(r,e))):(s&&(t.watchAll=!0),r),z=e=>/^\w*$/.test(e),D=e=>y(e.replace(/["|']|\]/g,"").split(/\.|\[/)),q=(e,t,r)=>{let s=-1,i=z(t)?[t]:D(t),a=i.length,l=a-1;for(;++s<a;){let t=i[s],a=r;if(s!==l){let r=e[t];a=c(r)||Array.isArray(r)?r:isNaN(+i[s+1])?{}:[]}e[t]=a,e=e[t]}return e};let M=e=>e.render(function(e){let t=k(),{name:r,disabled:s,control:a=t.control,shouldUnregister:l}=e,n=h(a._names.array,r),o=function(e){let t=k(),{control:r=t.control,name:s,defaultValue:a,disabled:l,exact:n}=e||{},o=i.useRef(s);o.current=s,R({disabled:l,subject:r._subjects.values,next:e=>{E(o.current,e.name,n)&&u(g(P(o.current,r._names,e.values||r._formValues,!1,a)))}});let[d,u]=i.useState(r._getWatch(s,a));return i.useEffect(()=>r._removeUnmounted()),d}({control:a,name:r,defaultValue:v(a._formValues,r,v(a._defaultValues,r,e.defaultValue)),exact:!0}),d=function(e){let t=k(),{control:r=t.control,disabled:s,name:a,exact:l}=e||{},[n,o]=i.useState(r._formState),d=i.useRef(!0),u=i.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=i.useRef(a);return c.current=a,R({disabled:s,next:e=>d.current&&E(c.current,e.name,l)&&F(e,u.current,r._updateFormState)&&o({...r._formState,...e}),subject:r._subjects.state}),i.useEffect(()=>(d.current=!0,u.current.isValid&&r._updateValid(!0),()=>{d.current=!1}),[r]),C(n,r,u.current,!1)}({control:a,name:r}),u=i.useRef(a.register(r,{...e.rules,value:o,..._(e.disabled)?{disabled:e.disabled}:{}}));return i.useEffect(()=>{let e=a._options.shouldUnregister||l,t=(e,t)=>{let r=v(a._fields,e);r&&(r._f.mount=t)};if(t(r,!0),e){let e=g(v(a._options.defaultValues,r));q(a._defaultValues,r,e),b(v(a._formValues,r))&&q(a._formValues,r,e)}return()=>{(n?e&&!a._state.action:e)?a.unregister(r):t(r,!1)}},[r,a,n,l]),i.useEffect(()=>{v(a._fields,r)&&a._updateDisabledField({disabled:s,fields:a._fields,name:r,value:v(a._fields,r)._f.value})},[s,r,a]),{field:{name:r,value:o,..._(s)||d.disabled?{disabled:d.disabled||s}:{},onChange:i.useCallback(e=>u.current.onChange({target:{value:m(e),name:r},type:j.CHANGE}),[r]),onBlur:i.useCallback(()=>u.current.onBlur({target:{value:v(a._formValues,r),name:r},type:j.BLUR}),[r,a]),ref:e=>{let t=v(a._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!v(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!v(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!v(d.touchedFields,r)},error:{enumerable:!0,get:()=>v(d.errors,r)}})}}(e));var T=(e,t,r,s,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:i||!0}}:{},L=e=>({isOnSubmit:!e||e===w.onSubmit,isOnBlur:e===w.onBlur,isOnChange:e===w.onChange,isOnAll:e===w.all,isOnTouch:e===w.onTouched}),U=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let B=(e,t,r,s)=>{for(let i of r||Object.keys(e)){let r=v(e,i);if(r){let{_f:e,...a}=r;if(e)if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!s)break;else if(e.ref&&t(e.ref,e.name)&&!s)break;else B(a,t);else c(a)&&B(a,t)}}};var I=(e,t,r)=>{let s=y(v(e,r));return q(s,"root",t[r]),q(e,r,s),e},$=e=>"file"===e.type,K=e=>"function"==typeof e,W=e=>{if(!x)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},H=e=>O(e),G=e=>"radio"===e.type,X=e=>e instanceof RegExp;let Q={value:!1,isValid:!1},J={value:!0,isValid:!0};var Y=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!b(e[0].attributes.value)?b(e[0].value)||""===e[0].value?J:{value:e[0].value,isValid:!0}:J:Q}return Q};let Z={isValid:!1,value:null};var ee=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Z):Z;function et(e,t,r="validate"){if(H(e)||Array.isArray(e)&&e.every(H)||_(e)&&!e)return{type:r,message:H(e)?e:"",ref:t}}var er=e=>c(e)&&!X(e)?e:{value:e,message:""},es=async(e,t,r,s,i)=>{let{ref:a,refs:l,required:o,maxLength:u,minLength:m,min:f,max:h,pattern:p,validate:x,name:g,valueAsNumber:y,mount:j,disabled:w}=e._f,S=v(t,g);if(!j||w)return{};let k=l?l[0]:a,C=e=>{s&&k.reportValidity&&(k.setCustomValidity(_(e)?"":e||""),k.reportValidity())},F={},V=G(a),E=n(a),R=(y||$(a))&&b(a.value)&&b(S)||W(a)&&""===a.value||""===S||Array.isArray(S)&&!S.length,P=T.bind(null,g,r,F),z=(e,t,r,s=N.maxLength,i=N.minLength)=>{let l=e?t:r;F[g]={type:e?s:i,message:l,ref:a,...P(e?s:i,l)}};if(i?!Array.isArray(S)||!S.length:o&&(!(V||E)&&(R||d(S))||_(S)&&!S||E&&!Y(l).isValid||V&&!ee(l).isValid)){let{value:e,message:t}=H(o)?{value:!!o,message:o}:er(o);if(e&&(F[g]={type:N.required,message:t,ref:k,...P(N.required,t)},!r))return C(t),F}if(!R&&(!d(f)||!d(h))){let e,t,s=er(h),i=er(f);if(d(S)||isNaN(S)){let r=a.valueAsDate||new Date(S),l=e=>new Date(new Date().toDateString()+" "+e),n="time"==a.type,o="week"==a.type;O(s.value)&&S&&(e=n?l(S)>l(s.value):o?S>s.value:r>new Date(s.value)),O(i.value)&&S&&(t=n?l(S)<l(i.value):o?S<i.value:r<new Date(i.value))}else{let r=a.valueAsNumber||(S?+S:S);d(s.value)||(e=r>s.value),d(i.value)||(t=r<i.value)}if((e||t)&&(z(!!e,s.message,i.message,N.max,N.min),!r))return C(F[g].message),F}if((u||m)&&!R&&(O(S)||i&&Array.isArray(S))){let e=er(u),t=er(m),s=!d(e.value)&&S.length>+e.value,i=!d(t.value)&&S.length<+t.value;if((s||i)&&(z(s,e.message,t.message),!r))return C(F[g].message),F}if(p&&!R&&O(S)){let{value:e,message:t}=er(p);if(X(e)&&!S.match(e)&&(F[g]={type:N.pattern,message:t,ref:a,...P(N.pattern,t)},!r))return C(t),F}if(x){if(K(x)){let e=et(await x(S,t),k);if(e&&(F[g]={...e,...P(N.validate,e.message)},!r))return C(e.message),F}else if(c(x)){let e={};for(let s in x){if(!A(e)&&!r)break;let i=et(await x[s](S,t),k,s);i&&(e={...i,...P(s,i.message)},C(i.message),r&&(F[g]=e))}if(!A(e)&&(F[g]={ref:k,...e},!r))return F}}return C(!0),F};function ei(e,t){let r=Array.isArray(t)?t:z(t)?[t]:D(t),s=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,s=0;for(;s<r;)e=b(e)?s++:e[t[s++]];return e}(e,r),i=r.length-1,a=r[i];return s&&delete s[a],0!==i&&(c(s)&&A(s)||Array.isArray(s)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!b(e[t]))return!1;return!0}(s))&&ei(e,r.slice(0,-1)),e}var ea=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},el=e=>d(e)||!u(e);function en(e,t){if(el(e)||el(t))return e===t;if(o(e)&&o(t))return e.getTime()===t.getTime();let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let i of r){let r=e[i];if(!s.includes(i))return!1;if("ref"!==i){let e=t[i];if(o(r)&&o(e)||c(r)&&c(e)||Array.isArray(r)&&Array.isArray(e)?!en(r,e):r!==e)return!1}}return!0}var eo=e=>"select-multiple"===e.type,ed=e=>G(e)||n(e),eu=e=>W(e)&&e.isConnected,ec=e=>{for(let t in e)if(K(e[t]))return!0;return!1};function em(e,t={}){let r=Array.isArray(e);if(c(e)||r)for(let r in e)Array.isArray(e[r])||c(e[r])&&!ec(e[r])?(t[r]=Array.isArray(e[r])?[]:{},em(e[r],t[r])):d(e[r])||(t[r]=!0);return t}var ef=(e,t)=>(function e(t,r,s){let i=Array.isArray(t);if(c(t)||i)for(let i in t)Array.isArray(t[i])||c(t[i])&&!ec(t[i])?b(r)||el(s[i])?s[i]=Array.isArray(t[i])?em(t[i],[]):{...em(t[i])}:e(t[i],d(r)?{}:r[i],s[i]):s[i]=!en(t[i],r[i]);return s})(e,t,em(t)),eh=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>b(e)?e:t?""===e?NaN:e?+e:e:r&&O(e)?new Date(e):s?s(e):e;function ep(e){let t=e.ref;if(e.refs?!e.refs.every(e=>e.disabled):!t.disabled)return $(t)?t.files:G(t)?ee(e.refs).value:eo(t)?[...t.selectedOptions].map(({value:e})=>e):n(t)?Y(e.refs).value:eh(b(t.value)?e.ref.value:t.value,e)}var ex=(e,t,r,s)=>{let i={};for(let r of e){let e=v(t,r);e&&q(i,r,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:s}},eg=e=>b(e)?e:X(e)?e.source:c(e)?X(e.value)?e.value.source:e.value:e,ey=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function eb(e,t,r){let s=v(e,r);if(s||z(r))return{error:s,name:r};let i=r.split(".");for(;i.length;){let s=i.join("."),a=v(t,s),l=v(e,s);if(a&&!Array.isArray(a)&&r!==s)break;if(l&&l.type)return{name:s,error:l};i.pop()}return{name:r}}var ev=(e,t,r,s,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?s.isOnBlur:i.isOnBlur)?!e:(r?!s.isOnChange:!i.isOnChange)||e),e_=(e,t)=>!y(v(e,t)).length&&ei(e,t);let ej={mode:w.onSubmit,reValidateMode:w.onChange,shouldFocusError:!0};var ew=r(79481),eN=r(8693),eS=r(54050),ek=r(25495),eC=r(12850);let eA=({bucket:e,onComplete:t,maxFiles:r=1,acceptedFileTypes:l=["image/jpeg","image/png","image/webp"]})=>{let[n,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)(0),c=(0,a.createClientComponentClient)(),m=(0,i.useCallback)(async s=>{try{if(!s.target.files||0===s.target.files.length)return;o(!0),u(0);let i=Array.from(s.target.files).slice(0,r);for(let[r,s]of i.entries()){if(!l.includes(s.type)){alert(`Skipping file ${s.name}: Invalid file type ${s.type}`);continue}let a=s.name.split(".").pop()?.toLowerCase()||"";if(!["jpg","jpeg","png","webp"].includes(a)){alert(`Skipping file ${s.name}: Invalid extension ${a}`);continue}let n=s,o=s,d="",m="";try{n=await (0,eC.A)(s,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/webp",initialQuality:.85}),d=`${(0,ek.A)()}.webp`,o=await (0,eC.A)(s,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.85}),m=`${(0,ek.A)()}.jpg`}catch(e){alert("Image optimization failed. Uploading original file."),d=`${(0,ek.A)()}.webp`,m=`${(0,ek.A)()}.jpg`}let f=setInterval(()=>{u(e=>Math.min(e+10,90))},100);try{let{error:s}=await c.storage.from(e).upload(d,n,{cacheControl:"3600",upsert:!0});if(s)throw s;let{error:a}=await c.storage.from(e).upload(m,o,{cacheControl:"3600",upsert:!0});if(a)throw a;u(100),t({webp:d,original:m}),r<i.length-1&&u(0)}catch(e){alert("Error uploading file: "+(e instanceof Error?e.message:JSON.stringify(e,null,2)))}finally{clearInterval(f)}}}catch(e){alert("Error in handleUpload: "+(e instanceof Error?e.message:JSON.stringify(e,null,2)))}finally{o(!1),u(0)}},[e,r,l,t,c]);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"file",onChange:m,accept:l.join(","),multiple:r>1,disabled:n,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-light file:text-primary hover:file:bg-primary hover:file:text-white"}),n&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded",children:(0,s.jsx)("div",{className:"h-2 bg-primary rounded transition-all duration-300",style:{width:`${d}%`}})}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Uploading... ",d,"%"]})]})]})};var eF=r(76180),eV=r.n(eF);let eE=({initialContent:e="",onChange:t,className:r})=>{let a=(0,i.useRef)(null);return(0,i.useEffect)(()=>{a.current&&(a.current.innerHTML=e)},[e]),(0,s.jsxs)("div",{style:{fontFamily:"Karla, sans-serif"},className:`jsx-1c8c36f32d07738f simple-rich-text-editor border rounded p-2 bg-white min-h-[200px] ${r??""}`,children:[(0,s.jsx)("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,onInput:()=>{a.current&&t?.(a.current.innerHTML)},style:{fontFamily:"inherit",padding:8},spellCheck:!0,className:"jsx-1c8c36f32d07738f outline-none min-h-[160px] prose max-w-none"}),(0,s.jsx)(eV(),{id:"1c8c36f32d07738f",children:".simple-rich-text-editor.jsx-1c8c36f32d07738f h2.jsx-1c8c36f32d07738f{font-size:1.15rem;font-weight:600;margin:.75rem 0 .4rem}.simple-rich-text-editor.jsx-1c8c36f32d07738f h3.jsx-1c8c36f32d07738f{font-size:1.05rem;font-weight:600;margin:.6rem 0 .3rem}.simple-rich-text-editor.jsx-1c8c36f32d07738f h4.jsx-1c8c36f32d07738f{font-size:.95rem;font-weight:600;margin:.5rem 0 .2rem}.simple-rich-text-editor.jsx-1c8c36f32d07738f ul.jsx-1c8c36f32d07738f{list-style:disc;margin-left:1.5rem}.simple-rich-text-editor.jsx-1c8c36f32d07738f ol.jsx-1c8c36f32d07738f{list-style:decimal;margin-left:1.5rem}.simple-rich-text-editor.jsx-1c8c36f32d07738f b.jsx-1c8c36f32d07738f,.simple-rich-text-editor.jsx-1c8c36f32d07738f strong.jsx-1c8c36f32d07738f{font-weight:bold}.simple-rich-text-editor.jsx-1c8c36f32d07738f p.jsx-1c8c36f32d07738f{margin:.5em 0}"})]})},eR={bicycle:[{label:"12 inch",value:'12"'},{label:"14 inch",value:'14"'},{label:"16 inch",value:'16"'},{label:"18 inch",value:'18"'},{label:"20 inch",value:'20"'},{label:"24 inch",value:'24"'},{label:"26 inch",value:'26"'}],skates:[{label:"EU 28–31",value:"28–31"},{label:"EU 32–35",value:"32–35"},{label:"EU 36–39",value:"36–39"},{label:"EU 40–43",value:"40–43"},{label:"EU 43–45",value:"43–45"},{label:"EU 45–48",value:"45–48"}],general:[{label:"XS",value:"XS"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"}]},eO=({initialSizes:e=[],onChange:t})=>{let[r,a]=(0,i.useState)(e),[l,n]=(0,i.useState)("general"),[o,d]=(0,i.useState)(""),[u,c]=(0,i.useState)(0);(0,i.useEffect)(()=>{t?.(r)},[r,t]);let m=e=>{let s=r.filter((t,r)=>r!==e);a(s),t?.(s)},f=(e,s,i)=>{let l=r.map((t,r)=>r===e?{...t,[s]:i}:t);a(l),t?.(l)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[(0,s.jsxs)("select",{value:l,onChange:e=>n(e.target.value),className:"rounded-lg border p-3 text-base w-full sm:w-auto",children:[(0,s.jsx)("option",{value:"general",children:"General Sizes"}),(0,s.jsx)("option",{value:"bicycle",children:"Bicycle Sizes"}),(0,s.jsx)("option",{value:"skates",children:"Skates Sizes"})]}),(0,s.jsx)("button",{onClick:()=>{let e=eR[l].map(e=>({value:e.value,label:e.label,type:l,price:0,available:!0}));a(e),t?.(e)},className:"bg-primary text-white px-6 py-3 rounded-lg font-semibold shadow-sm hover:bg-primary-dark transition whitespace-nowrap w-full sm:w-auto",type:"button",children:"Add Default Sizes"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"Enter size value",className:"rounded-lg border p-3 text-base w-full sm:w-auto"}),(0,s.jsx)("input",{type:"number",value:u,onChange:e=>c(Number(e.target.value)),placeholder:"Price (required)",className:"rounded-lg border p-3 text-base font-mono text-right w-full sm:w-auto",min:0,required:!0,style:{minWidth:"150px",maxWidth:"100%"}}),(0,s.jsx)("button",{onClick:()=>{if(!o.trim()||!u||u<=0)return;let e={value:o,label:o,type:l,price:u,available:!0};a([...r,e]),d(""),c(0),t?.([...r,e])},className:"bg-primary text-white px-6 py-3 rounded-lg font-semibold shadow-sm hover:bg-primary-dark transition whitespace-nowrap w-full sm:w-auto",type:"button",children:"Add Size"})]}),(0,s.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>(0,s.jsxs)("div",{className:"rounded-lg border shadow-sm bg-white p-4 flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Label"}),(0,s.jsx)("input",{type:"text",value:e.label,onChange:e=>f(t,"label",e.target.value),placeholder:"e.g. EU 28–31",className:"rounded border p-2 text-base w-full",required:!0})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Value/Code"}),(0,s.jsx)("input",{type:"text",value:e.value,onChange:e=>f(t,"value",e.target.value),placeholder:"e.g. 28–31",className:"rounded border p-2 text-base w-full",required:!0})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 items-end",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Price (Ksh)"}),(0,s.jsx)("input",{type:"number",value:e.price,onChange:e=>f(t,"price",Number(e.target.value)),placeholder:"Price",className:"rounded border p-2 text-lg font-mono w-full",min:0,required:!0,style:{textAlign:"right"}})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center pt-5 sm:pt-0",children:[(0,s.jsx)("button",{onClick:()=>f(t,"available",!e.available),className:`px-3 py-2 rounded ${e.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,type:"button",title:e.available?"Mark as unavailable":"Mark as available",children:e.available?"Available":"Unavailable"}),(0,s.jsx)("button",{onClick:()=>m(t),className:"text-red-500 hover:text-red-700 p-2 rounded focus:outline-none focus:ring-2 focus:ring-red-400",type:"button","aria-label":"Remove size",title:"Remove size",children:"\xd7"})]})]})]},t))})]})};function eP({product:e,onClose:t}){let[r,a]=(0,i.useState)(!1),[u,f]=(0,i.useState)(null),[p,N]=(0,i.useState)(e?.images||[]),[S,k]=(0,i.useState)(e?.sizes||[]),E=(0,eN.jE)(),{data:z,isLoading:D}=(0,l.I)({queryKey:["categories-list"],queryFn:async()=>{let{data:e,error:t}=await ew.N.from("categories").select("id, name").eq("is_active",!0);if(t)throw t;return e||[]},staleTime:9e5}),{register:T,handleSubmit:H,formState:{errors:G},control:X,watch:Q,setValue:J}=function(e={}){let t=i.useRef(),r=i.useRef(),[s,a]=i.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...function(e={},t){let r,s={...ej,...e},i={submitCount:0,isDirty:!1,isLoading:K(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},l=(c(s.values)||c(s.defaultValues))&&g(s.values||s.defaultValues)||{},u=s.shouldUnregister?{}:g(l),f={action:!1,mount:!1,watch:!1},p={mount:new Set,unMount:new Set,array:new Set,watch:new Set},N=0,S={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={values:ea(),array:ea(),state:ea()},C=L(s.mode),F=L(s.reValidateMode),E=s.criteriaMode===w.all,R=e=>t=>{clearTimeout(N),N=setTimeout(e,t)},z=async e=>{if(S.isValid||e){let e=s.resolver?A((await X()).errors):await J(a,!0);e!==i.isValid&&k.state.next({isValid:e})}},D=e=>S.isValidating&&k.state.next({isValidating:e}),M=(e,t)=>{q(i.errors,e,t),k.state.next({errors:i.errors})},T=(e,t,r,s)=>{let i=v(a,e);if(i){let a=v(u,e,b(r)?v(l,e):r);b(a)||s&&s.defaultChecked||t?q(u,e,t?a:ep(i._f)):ee(e,a),f.mount&&z()}},H=(e,t,r,s,n)=>{let o=!1,d=!1,u={name:e},c=!!(v(a,e)&&v(a,e)._f.disabled);if(!r||s){S.isDirty&&(d=i.isDirty,i.isDirty=u.isDirty=Y(),o=d!==u.isDirty);let r=c||en(v(l,e),t);d=!!(!c&&v(i.dirtyFields,e)),r||c?ei(i.dirtyFields,e):q(i.dirtyFields,e,!0),u.dirtyFields=i.dirtyFields,o=o||S.dirtyFields&&!r!==d}if(r){let t=v(i.touchedFields,e);t||(q(i.touchedFields,e,r),u.touchedFields=i.touchedFields,o=o||S.touchedFields&&t!==r)}return o&&n&&k.state.next(u),o?u:{}},G=(t,s,a,l)=>{let n=v(i.errors,t),o=S.isValid&&_(s)&&i.isValid!==s;if(e.delayError&&a?(r=R(()=>M(t,a)))(e.delayError):(clearTimeout(N),r=null,a?q(i.errors,t,a):ei(i.errors,t)),(a?!en(n,a):n)||!A(l)||o){let e={...l,...o&&_(s)?{isValid:s}:{},errors:i.errors,name:t};i={...i,...e},k.state.next(e)}D(!1)},X=async e=>s.resolver(u,s.context,ex(e||p.mount,a,s.criteriaMode,s.shouldUseNativeValidation)),Q=async e=>{let{errors:t}=await X(e);if(e)for(let r of e){let e=v(t,r);e?q(i.errors,r,e):ei(i.errors,r)}else i.errors=t;return t},J=async(e,t,r={valid:!0})=>{for(let a in e){let l=e[a];if(l){let{_f:e,...a}=l;if(e){let a=p.array.has(e.name),n=await es(l,u,E,s.shouldUseNativeValidation&&!t,a);if(n[e.name]&&(r.valid=!1,t))break;t||(v(n,e.name)?a?I(i.errors,n,e.name):q(i.errors,e.name,n[e.name]):ei(i.errors,e.name))}a&&await J(a,t,r)}}return r.valid},Y=(e,t)=>(e&&t&&q(u,e,t),!en(eN(),l)),Z=(e,t,r)=>P(e,p,{...f.mount?u:b(t)?l:O(e)?{[e]:t}:t},r,t),ee=(e,t,r={})=>{let s=v(a,e),i=t;if(s){let r=s._f;r&&(r.disabled||q(u,e,eh(t,r)),i=W(r.ref)&&d(t)?"":t,eo(r.ref)?[...r.ref.options].forEach(e=>e.selected=i.includes(e.value)):r.refs?n(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find(t=>t===e.value):i===e.value)):r.refs[0]&&(r.refs[0].checked=!!i):r.refs.forEach(e=>e.checked=e.value===i):$(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||k.values.next({name:e,values:{...u}})))}(r.shouldDirty||r.shouldTouch)&&H(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&ew(e)},et=(e,t,r)=>{for(let s in t){let i=t[s],l=`${e}.${s}`,n=v(a,l);!p.array.has(e)&&el(i)&&(!n||n._f)||o(i)?ee(l,i,r):et(l,i,r)}},er=(e,r,s={})=>{let n=v(a,e),o=p.array.has(e),c=g(r);q(u,e,c),o?(k.array.next({name:e,values:{...u}}),(S.isDirty||S.dirtyFields)&&s.shouldDirty&&k.state.next({name:e,dirtyFields:ef(l,u),isDirty:Y(e,c)})):!n||n._f||d(c)?ee(e,c,s):et(e,c,s),U(e,p)&&k.state.next({...i}),k.values.next({name:e,values:{...u}}),f.mount||t()},ec=async e=>{let t=e.target,l=t.name,n=!0,o=v(a,l),d=e=>{n=Number.isNaN(e)||e===v(u,l,e)};if(o){let c,f,h=t.type?ep(o._f):m(e),x=e.type===j.BLUR||e.type===j.FOCUS_OUT,g=!ey(o._f)&&!s.resolver&&!v(i.errors,l)&&!o._f.deps||ev(x,v(i.touchedFields,l),i.isSubmitted,F,C),y=U(l,p,x);q(u,l,h),x?(o._f.onBlur&&o._f.onBlur(e),r&&r(0)):o._f.onChange&&o._f.onChange(e);let b=H(l,h,x,!1),_=!A(b)||y;if(x||k.values.next({name:l,type:e.type,values:{...u}}),g)return S.isValid&&z(),_&&k.state.next({name:l,...y?{}:b});if(!x&&y&&k.state.next({...i}),D(!0),s.resolver){let{errors:e}=await X([l]);if(d(h),n){let t=eb(i.errors,a,l),r=eb(e,a,t.name||l);c=r.error,l=r.name,f=A(e)}}else c=(await es(o,u,E,s.shouldUseNativeValidation))[l],d(h),n&&(c?f=!1:S.isValid&&(f=await J(a,!0)));n&&(o._f.deps&&ew(o._f.deps),G(l,f,c,b))}},em=(e,t)=>{if(v(i.errors,t)&&e.focus)return e.focus(),1},ew=async(e,t={})=>{let r,l,n=V(e);if(D(!0),s.resolver){let t=await Q(b(e)?e:n);r=A(t),l=e?!n.some(e=>v(t,e)):r}else e?((l=(await Promise.all(n.map(async e=>{let t=v(a,e);return await J(t&&t._f?{[e]:t}:t)}))).every(Boolean))||i.isValid)&&z():l=r=await J(a);return k.state.next({...!O(e)||S.isValid&&r!==i.isValid?{}:{name:e},...s.resolver||!e?{isValid:r}:{},errors:i.errors,isValidating:!1}),t.shouldFocus&&!l&&B(a,em,e?n:p.mount),l},eN=e=>{let t={...l,...f.mount?u:{}};return b(e)?t:O(e)?v(t,e):e.map(e=>v(t,e))},eS=(e,t)=>({invalid:!!v((t||i).errors,e),isDirty:!!v((t||i).dirtyFields,e),isTouched:!!v((t||i).touchedFields,e),error:v((t||i).errors,e)}),ek=(e,t,r)=>{let s=(v(a,e,{_f:{}})._f||{}).ref;q(i.errors,e,{...t,ref:s}),k.state.next({name:e,errors:i.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},eC=(e,t={})=>{for(let r of e?V(e):p.mount)p.mount.delete(r),p.array.delete(r),t.keepValue||(ei(a,r),ei(u,r)),t.keepError||ei(i.errors,r),t.keepDirty||ei(i.dirtyFields,r),t.keepTouched||ei(i.touchedFields,r),s.shouldUnregister||t.keepDefaultValue||ei(l,r);k.values.next({values:{...u}}),k.state.next({...i,...!t.keepDirty?{}:{isDirty:Y()}}),t.keepIsValid||z()},eA=({disabled:e,name:t,field:r,fields:s,value:i})=>{if(_(e)){let a=e?void 0:b(i)?ep(r?r._f:v(s,t)._f):i;q(u,t,a),H(t,a,!1,!1,!0)}},eF=(e,t={})=>{let r=v(a,e),i=_(t.disabled);return q(a,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),p.mount.add(e),r?eA({field:r,disabled:t.disabled,name:e,value:t.value}):T(e,!0,t.value),{...i?{disabled:t.disabled}:{},...s.progressive?{required:!!t.required,min:eg(t.min),max:eg(t.max),minLength:eg(t.minLength),maxLength:eg(t.maxLength),pattern:eg(t.pattern)}:{},name:e,onChange:ec,onBlur:ec,ref:i=>{if(i){eF(e,t),r=v(a,e);let s=b(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,n=ed(s),o=r._f.refs||[];(n?o.find(e=>e===s):s===r._f.ref)||(q(a,e,{_f:{...r._f,...n?{refs:[...o.filter(eu),s,...Array.isArray(v(l,e))?[{}]:[]],ref:{type:s.type,name:e}}:{ref:s}}}),T(e,!1,void 0,s))}else(r=v(a,e,{}))._f&&(r._f.mount=!1),(s.shouldUnregister||t.shouldUnregister)&&!(h(p.array,e)&&f.action)&&p.unMount.add(e)}}},eV=()=>s.shouldFocusError&&B(a,em,p.mount),eE=(e,t)=>async r=>{let l;r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let n=g(u);if(k.state.next({isSubmitting:!0}),s.resolver){let{errors:e,values:t}=await X();i.errors=e,n=t}else await J(a);if(ei(i.errors,"root"),A(i.errors)){k.state.next({errors:{}});try{await e(n,r)}catch(e){l=e}}else t&&await t({...i.errors},r),eV(),setTimeout(eV);if(k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:A(i.errors)&&!l,submitCount:i.submitCount+1,errors:i.errors}),l)throw l},eR=(r,s={})=>{let n=r?g(r):l,o=g(n),d=r&&!A(r)?o:l;if(s.keepDefaultValues||(l=n),!s.keepValues){if(s.keepDirtyValues)for(let e of p.mount)v(i.dirtyFields,e)?q(d,e,v(u,e)):er(e,v(d,e));else{if(x&&b(r))for(let e of p.mount){let t=v(a,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(W(e)){let t=e.closest("form");if(t){t.reset();break}}}}a={}}u=e.shouldUnregister?s.keepDefaultValues?g(l):{}:g(d),k.array.next({values:{...d}}),k.values.next({values:{...d}})}p={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount||t(),f.mount=!S.isValid||!!s.keepIsValid||!!s.keepDirtyValues,f.watch=!!e.shouldUnregister,k.state.next({submitCount:s.keepSubmitCount?i.submitCount:0,isDirty:s.keepDirty?i.isDirty:!!(s.keepDefaultValues&&!en(r,l)),isSubmitted:!!s.keepIsSubmitted&&i.isSubmitted,dirtyFields:s.keepDirtyValues?s.keepDefaultValues&&u?ef(l,u):i.dirtyFields:s.keepDefaultValues&&r?ef(l,r):{},touchedFields:s.keepTouched?i.touchedFields:{},errors:s.keepErrors?i.errors:{},isSubmitSuccessful:!!s.keepIsSubmitSuccessful&&i.isSubmitSuccessful,isSubmitting:!1})},eO=(e,t)=>eR(K(e)?e(u):e,t);return{control:{register:eF,unregister:eC,getFieldState:eS,handleSubmit:eE,setError:ek,_executeSchema:X,_getWatch:Z,_getDirty:Y,_updateValid:z,_removeUnmounted:()=>{for(let e of p.unMount){let t=v(a,e);t&&(t._f.refs?t._f.refs.every(e=>!eu(e)):!eu(t._f.ref))&&eC(e)}p.unMount=new Set},_updateFieldArray:(e,t=[],r,s,n=!0,o=!0)=>{if(s&&r){if(f.action=!0,o&&Array.isArray(v(a,e))){let t=r(v(a,e),s.argA,s.argB);n&&q(a,e,t)}if(o&&Array.isArray(v(i.errors,e))){let t=r(v(i.errors,e),s.argA,s.argB);n&&q(i.errors,e,t),e_(i.errors,e)}if(S.touchedFields&&o&&Array.isArray(v(i.touchedFields,e))){let t=r(v(i.touchedFields,e),s.argA,s.argB);n&&q(i.touchedFields,e,t)}S.dirtyFields&&(i.dirtyFields=ef(l,u)),k.state.next({name:e,isDirty:Y(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else q(u,e,t)},_updateDisabledField:eA,_getFieldArray:t=>y(v(f.mount?u:l,t,e.shouldUnregister?v(l,t,[]):[])),_reset:eR,_resetDefaultValues:()=>K(s.defaultValues)&&s.defaultValues().then(e=>{eO(e,s.resetOptions),k.state.next({isLoading:!1})}),_updateFormState:e=>{i={...i,...e}},_disableForm:e=>{_(e)&&(k.state.next({disabled:e}),B(a,(t,r)=>{let s=e,i=v(a,r);i&&_(i._f.disabled)&&(s||(s=i._f.disabled)),t.disabled=s},0,!1))},_subjects:k,_proxyFormState:S,_setErrors:e=>{i.errors=e,k.state.next({errors:i.errors,isValid:!1})},get _fields(){return a},get _formValues(){return u},get _state(){return f},set _state(value){f=value},get _defaultValues(){return l},get _names(){return p},set _names(value){p=value},get _formState(){return i},set _formState(value){i=value},get _options(){return s},set _options(value){s={...s,...value}}},trigger:ew,register:eF,handleSubmit:eE,watch:(e,t)=>K(e)?k.values.subscribe({next:r=>e(Z(void 0,t),r)}):Z(e,t,!0),setValue:er,getValues:eN,reset:eO,resetField:(e,t={})=>{v(a,e)&&(b(t.defaultValue)?er(e,g(v(l,e))):(er(e,t.defaultValue),q(l,e,g(t.defaultValue))),t.keepTouched||ei(i.touchedFields,e),t.keepDirty||(ei(i.dirtyFields,e),i.isDirty=t.defaultValue?Y(e,g(v(l,e))):Y()),!t.keepError&&(ei(i.errors,e),S.isValid&&z()),k.state.next({...i}))},clearErrors:e=>{e&&V(e).forEach(e=>ei(i.errors,e)),k.state.next({errors:e?i.errors:{}})},unregister:eC,setError:ek,setFocus:(e,t={})=>{let r=v(a,e),s=r&&r._f;if(s){let e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:eS}}(e,()=>a(e=>({...e}))),formState:s});let l=t.current.control;return l._options=e,R({subject:l._subjects.state,next:e=>{F(e,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),i.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),i.useEffect(()=>{if(l._proxyFormState.isDirty){let e=l._getDirty();e!==s.isDirty&&l._subjects.state.next({isDirty:e})}},[l,s.isDirty]),i.useEffect(()=>{e.values&&!en(e.values,r.current)?(l._reset(e.values,l._options.resetOptions),r.current=e.values,a(e=>({...e}))):l._resetDefaultValues()},[e.values,l]),i.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),i.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),i.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),t.current.formState=C(s,l),t.current}({defaultValues:{...e,images:e?.images||[],status:e?.status||"active",stock:e?.stock??8,is_featured:e?.is_featured||!1,is_trending:e?.is_trending||!1,is_deal:e?.is_deal||!1,compare_at_price:e?.compare_at_price??null,sizes:e?.sizes||[],price:e?.price??null,tags:e?.tags||[],category_ids:e?.category_ids||(e?.category_id?[e.category_id]:[])},mode:"onTouched",reValidateMode:"onChange"}),Y="product-images";Q("name");let Z=e=>{let t=p.filter((t,r)=>r!==e);N(t),J("images",t)},ee=(e,t)=>{let r=p.map((r,s)=>s===e?{...r,alt:t}:r);N(r),J("images",r)},et=(0,eS.n)({mutationFn:async t=>{let r,s={name:t.name,slug:t.slug,description:t.description,price:t.price,compare_at_price:t.compare_at_price,stock:t.stock,category_id:t.category_ids[0]||null,status:t.status,is_featured:t.is_featured,is_trending:t.is_trending,is_deal:t.is_deal,images:t.images,sizes:t.sizes,tags:t.tags};if(e?.id){let{error:t}=await ew.N.from("products").update(s).eq("id",e.id);if(t)throw t;r=e.id}else{let{data:e,error:t}=await ew.N.from("products").insert(s).select().single();if(t)throw t;r=e.id}if(t.category_ids&&t.category_ids.length>0){let{error:e}=await ew.N.rpc("update_product_categories",{p_product_id:r,p_category_ids:t.category_ids})}return{id:r,...s}},onSuccess:()=>{E.invalidateQueries({queryKey:["products"]}),t()},onError:e=>{f(e.message)}}),er=async e=>{a(!0),f(null),et.mutate({...e,sizes:S},{onSettled:()=>{a(!1)}})};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 overflow-y-auto",children:(0,s.jsxs)("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[(0,s.jsx)("header",{className:"sticky top-0 z-20 bg-white px-8 pt-8 pb-4 border-b",children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Product":"Create New Product"})}),(0,s.jsxs)("form",{id:"product-form",onSubmit:H(er),className:"flex-1 overflow-y-auto px-8 py-6 space-y-10",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Product Details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),(0,s.jsx)("input",{type:"text",id:"name",...T("name",{required:"Product name is required"}),className:"block w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-primary focus:border-primary text-base"}),G.name&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:G.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,s.jsx)("input",{type:"text",id:"slug",...T("slug",{required:"Slug is required"}),className:"block w-full border border-gray-300 rounded-lg px-4 py-3 bg-gray-100 text-base",readOnly:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)(M,{name:"description",control:X,render:({field:e})=>(0,s.jsx)(eE,{initialContent:e.value,onChange:e.onChange})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),(0,s.jsx)(M,{name:"tags",control:X,defaultValue:[],render:({field:e})=>(0,s.jsx)("input",{type:"text",id:"tags",className:"block w-full border border-gray-300 rounded-lg px-4 py-3 text-base",defaultValue:Array.isArray(e.value)?e.value.join(", "):"",onChange:t=>{let r=t.target.value.split(",").map(e=>e.trim()).filter(Boolean);e.onChange(r)}})})]})]})]}),(0,s.jsx)("hr",{className:"my-6 border-gray-200"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pricing & Stock"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,s.jsx)("input",{type:"number",id:"price",...T("price",{valueAsNumber:!0,validate:e=>S&&S.length>0||null!==e&&e>0||"Price is required if there are no sizes."}),className:"block w-full border border-gray-300 rounded-lg px-4 py-3 text-base",step:"0.01",disabled:S&&S.length>0}),G.price&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:G.price.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"compare_at_price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare at Price"}),(0,s.jsx)("input",{type:"number",id:"compare_at_price",...T("compare_at_price",{valueAsNumber:!0}),className:"block w-full border border-gray-300 rounded-lg px-4 py-3 text-base",step:"0.01"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),(0,s.jsx)("input",{type:"number",id:"stock",...T("stock",{required:"Stock is required",valueAsNumber:!0,min:0}),className:"block w-full border border-gray-300 rounded-lg px-4 py-3 text-base"}),G.stock&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:G.stock.message})]})]})]}),(0,s.jsx)("hr",{className:"my-6 border-gray-200"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Sizes"}),(0,s.jsx)(eO,{initialSizes:S,onChange:k})]}),(0,s.jsx)("hr",{className:"my-6 border-gray-200"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Organization"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category_ids",className:"block text-sm font-medium text-gray-700 mb-1",children:"Categories"}),D?(0,s.jsx)("p",{children:"Loading categories..."}):(0,s.jsx)(M,{name:"category_ids",control:X,rules:{required:"At least one category is required"},render:({field:e})=>(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto pr-2",children:z?.map(t=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{id:`category-${t.id}`,type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",checked:e.value?.includes(t.id),onChange:r=>{let s=r.target.checked?[...e.value||[],t.id]:(e.value||[]).filter(e=>e!==t.id);e.onChange(s)}}),(0,s.jsx)("label",{htmlFor:`category-${t.id}`,className:"block text-sm text-gray-900",children:t.name})]},t.id))})}),G.category_ids&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:G.category_ids.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{id:"status",...T("status",{required:"Status is required"}),className:"block w-full border border-gray-300 rounded-lg px-4 py-3 text-base",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]}),G.status&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:G.status.message})]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex items-center h-5",children:(0,s.jsx)("input",{id:"is_featured",...T("is_featured"),type:"checkbox",className:"focus:ring-primary h-4 w-4 text-primary border-gray-300 rounded"})}),(0,s.jsxs)("div",{className:"ml-3 text-sm",children:[(0,s.jsx)("label",{htmlFor:"is_featured",className:"font-medium text-gray-700",children:"Featured"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Display on main featured sections."})]})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex items-center h-5",children:(0,s.jsx)("input",{id:"is_trending",...T("is_trending"),type:"checkbox",className:"focus:ring-primary h-4 w-4 text-primary border-gray-300 rounded"})}),(0,s.jsxs)("div",{className:"ml-3 text-sm",children:[(0,s.jsx)("label",{htmlFor:"is_trending",className:"font-medium text-gray-700",children:"Trending"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Mark as a trending product."})]})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex items-center h-5",children:(0,s.jsx)("input",{id:"is_deal",...T("is_deal"),type:"checkbox",className:"focus:ring-primary h-4 w-4 text-primary border-gray-300 rounded"})}),(0,s.jsxs)("div",{className:"ml-3 text-sm",children:[(0,s.jsx)("label",{htmlFor:"is_deal",className:"font-medium text-gray-700",children:"Deal"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Mark as a special deal."})]})]})]})]})]}),(0,s.jsx)("hr",{className:"my-6 border-gray-200"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Product Images"}),(0,s.jsx)(eA,{bucket:Y,onComplete:e=>{let t=[...p,{web_image_url:e.webp,feed_image_url:e.original,alt:""}];N(t),J("images",t)},maxFiles:5}),(0,s.jsx)("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:p.map((e,t)=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center bg-white border rounded-lg p-4 shadow-sm",children:[(0,s.jsx)("img",{src:`${ew.N.storage.from(Y).getPublicUrl(e.web_image_url).data.publicUrl}`,alt:e.alt||`Product image ${t+1}`,className:"h-32 w-full object-cover rounded-md mb-2"}),(0,s.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Alt text"}),(0,s.jsx)("input",{type:"text",placeholder:"Alt text",value:e.alt,onChange:e=>ee(t,e.target.value),className:"block w-full text-xs border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary px-2 py-1 mb-2"}),(0,s.jsx)("button",{type:"button",onClick:()=>Z(t),className:"absolute top-2 right-2 text-white bg-red-600 hover:bg-red-700 rounded-full p-1 shadow",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]},t))})]}),u&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-6",role:"alert",children:[(0,s.jsx)("strong",{className:"font-bold",children:"Error:"}),(0,s.jsxs)("span",{className:"block sm:inline",children:[" ",u]})]})]}),(0,s.jsxs)("footer",{className:"sticky bottom-0 z-30 bg-white px-8 py-4 border-t flex justify-end gap-4 rounded-b-2xl",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"bg-white py-2 px-6 border border-gray-300 rounded-lg shadow-sm text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",form:"product-form",disabled:r,className:"inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-base font-medium rounded-lg text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:r?"Saving...":e?"Save Changes":"Create Product"})]})]})})}var ez=r(37590),eD=r(17335);let eq=e=>e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,50);function eM(){let[e,t]=(0,i.useState)(1),[r,n]=(0,i.useState)(""),[o,d]=(0,i.useState)(!1),[u,c]=(0,i.useState)(null),m=(0,a.createClientComponentClient)(),{data:f}=(0,l.I)({queryKey:["categories-list"],queryFn:async()=>{let{data:e,error:t}=await m.from("categories").select("id, name");if(t)throw t;return e||[]},staleTime:6e5}),h={};f?.forEach(e=>{h[e.id]=e.name});let{data:p,isLoading:x}=(0,l.I)({queryKey:["products",e,r],queryFn:async()=>{let t=m.from("products").select(`
          id,
          name,
          description,
          price,
          compare_at_price,
          stock,
          status,
          category_id,
          is_featured,
          is_trending,
          is_deal,
          created_at,
          slug,
          images,
          sizes,
          tags,
          category:categories(id, name)
        `).range((e-1)*10,10*e-1).order("created_at",{ascending:!1});r&&(t=t.filter("name","ilike",`%${r}%`));let{data:s,error:i}=await t;if(i)throw i;return s.map(e=>({...e,category:Array.isArray(e.category)?e.category[0]:null}))},staleTime:3e5}),{data:g}=(0,l.I)({queryKey:["products-count",r],queryFn:async()=>{let e=m.from("products").select("*",{count:"exact",head:!0});r&&(e=e.filter("name","ilike",`%${r}%`));let{count:t,error:s}=await e;if(s)throw s;return t||0},staleTime:3e5}),y=Math.ceil((g||0)/10),b=async e=>{if(!window.confirm("Are you sure you want to delete this product? This action cannot be undone."))return;let{error:t}=await m.from("products").delete().eq("id",e);t?ez.oR.error("Failed to delete product: "+t.message):(ez.oR.success("Product deleted successfully"),window.location.reload())};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Products"}),(0,s.jsx)("button",{onClick:()=>{c(null),d(!0)},className:"rounded-md bg-primary px-4 py-2 text-white hover:bg-primary-dark",children:"Add Product"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("input",{type:"text",placeholder:"Search products...",value:r,onChange:e=>n(e.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:border-primary focus:outline-none"})}),o&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black bg-opacity-50 p-4",children:(0,s.jsxs)("div",{className:"relative w-full max-w-2xl rounded-lg bg-white shadow-xl my-8",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:u?"Edit Product":"Add New Product"})}),(0,s.jsx)("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto p-6",children:(0,s.jsx)(eP,{product:u?{...u,slug:u.slug||eq(u.name),category_ids:u.category_id?[u.category_id]:[],compare_at_price:u.compare_at_price||null,images:Array.isArray(u.images)?u.images.map(e=>({web_image_url:e.web_image_url||e.webp_url||"",feed_image_url:e.feed_image_url||e.feed_url||"",alt:e.alt||""})):[],sizes:u.sizes||[],tags:u.tags||[]}:void 0,onClose:()=>{d(!1),c(null)}})})]})}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Product"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Stock"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:x?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center",children:"Loading..."})}):p?.length===0?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center",children:"No products found"})}):p?.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(0,s.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:(0,eD.a)(e.images?.[0]),alt:e.name})}),(0,s.jsx)("div",{className:"ml-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:e.category&&e.category.name?e.category.name:e.category_id&&h[e.category_id]?h[e.category_id]:"Uncategorized"}),(0,s.jsxs)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:["Ksh ",e.price.toLocaleString("en-KE")]}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:e.stock}),(0,s.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,s.jsx)("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold ${"active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>{c(e),d(!0)},className:"text-primary hover:underline mr-4",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:underline",children:"Delete"})]})]},e.id))})]})}),y>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6",children:[(0,s.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,s.jsx)("button",{onClick:()=>t(e=>Math.max(1,e-1)),disabled:1===e,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>t(e=>Math.min(y,e+1)),disabled:e===y,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Next"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,s.jsx)("span",{className:"font-medium",children:(e-1)*10+1})," to"," ",(0,s.jsx)("span",{className:"font-medium",children:Math.min(10*e,g||0)})," ","of ",(0,s.jsx)("span",{className:"font-medium",children:g})," results"]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,s.jsx)("button",{onClick:()=>t(e=>Math.max(1,e-1)),disabled:1===e,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",children:"Previous"}),Array.from({length:y},(e,t)=>t+1).map(r=>(0,s.jsx)("button",{onClick:()=>t(r),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${r===e?"z-10 bg-primary text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"}`,children:r},r)),(0,s.jsx)("button",{onClick:()=>t(e=>Math.min(y,e+1)),disabled:e===y,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0",children:"Next"})]})})]})]})]})}},50222:(e,t,r)=>{Promise.resolve().then(r.bind(r,49005))},54050:(e,t,r)=>{"use strict";r.d(t,{n:()=>c});var s=r(43210),i=r(65406),a=r(33465),l=r(35536),n=r(31212),o=class extends l.Q{constructor(e,t){super(),this.#e=void 0,this.#t=e,this.setOptions(t),this.bindMethods(),this.#r()}#t;#e;#s;#i;bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#t.defaultMutationOptions(e),(0,n.f8)(t,this.options)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),this.#s?.setOptions(this.options),t?.mutationKey&&this.options.mutationKey&&(0,n.EN)(t.mutationKey)!==(0,n.EN)(this.options.mutationKey)&&this.reset()}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#a()}mutate(e,t){return this.#i=t,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(e)}#r(){let e=this.#s?.state??(0,i.$)();this.#e={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.j.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#e.variables,r=this.#e.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,t,r),this.#i.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#i.onError?.(e.error,t,r),this.#i.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#e)})})}},d=r(8693),u=r(35706);function c(e,t){let r=(0,d.jE)(t),[i]=s.useState(()=>new o(r,e));s.useEffect(()=>{i.setOptions(e)},[i,e]);let l=s.useSyncExternalStore(s.useCallback(e=>i.subscribe(a.j.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=s.useCallback((e,t)=>{i.mutate(e,t).catch(m)},[i]);if(l.error&&(0,u.G)(i.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:n,mutateAsync:l.mutate}}function m(){}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56397:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64134:(e,t,r)=>{Promise.resolve().then(r.bind(r,38571))},74075:e=>{"use strict";e.exports=require("zlib")},75913:(e,t,r)=>{"use strict";r(56397);var s=r(43210),i=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s),a="undefined"!=typeof process&&process.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},n=function(){function e(e){var t=void 0===e?{}:e,r=t.name,s=void 0===r?"stylesheet":r,i=t.optimizeForSpeed,n=void 0===i?a:i;o(l(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",o("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){o("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),o(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;o(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){return o(l(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},r.replaceRule=function(e,t){this._optimizeForSpeed;var r=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(t){r.insertRule(this._deletedRulePlaceholder,e)}return e},r.deleteRule=function(e){this._serverSheet.deleteRule(e)},r.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},r.cssRules=function(){return this._serverSheet.cssRules},r.makeStyleTag=function(e,t,r){t&&o(l(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return r?i.insertBefore(s,r):i.appendChild(s),s},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}();function o(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function c(e,t){if(!t)return"jsx-"+e;var r=String(t),s=e+r;return u[s]||(u[s]="jsx-"+d(e+"-"+r)),u[s]}function m(e,t){var r=e+(t=t.replace(/\/style/gi,"\\/style"));return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var f=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,s=void 0===r?null:r,i=t.optimizeForSpeed,a=void 0!==i&&i;this._sheet=s||new n({name:"styled-jsx",optimizeForSpeed:a}),this._sheet.inject(),s&&"boolean"==typeof a&&(this._sheet.setOptimizeForSpeed(a),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var r=this.getIdAndRules(e),s=r.styleId,i=r.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var a=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=a,this._instancesCounts[s]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var s=this._fromServer&&this._fromServer[r];s?(s.parentNode.removeChild(s),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],s=e[1];return i.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,s=e.id;if(r){var i=c(s,r);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return m(i,e)}):[m(i,t)]}}return{styleId:c(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),h=s.createContext(null);h.displayName="StyleSheetContext";i.default.useInsertionEffect||i.default.useLayoutEffect;var p=void 0;function x(e){var t=p||s.useContext(h);return t&&t.add(e),null}x.dynamic=function(e){return e.map(function(e){return c(e[0],e[1])}).join(" ")},t.style=x},76180:(e,t,r)=>{"use strict";e.exports=r(75913).style},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,3605,6945,5745,2347,8244,4036,133],()=>r(37166));module.exports=s})();