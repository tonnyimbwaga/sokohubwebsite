(()=>{var e={};e.id=6631,e.ids=[6631],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9140:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(60687);r(43210);var i=r(11147);let s=({children:e,desc:t="",title:r="",className:s="mb-10",isCenter:l=!1,isMain:n,hasNextPrev:o,...c})=>(0,a.jsxs)("div",{className:`nc-Section-Heading relative flex flex-col justify-between sm:flex-row sm:items-end ${s}`,children:[(0,a.jsxs)("div",{className:l?"mx-auto mb-2 w-full max-w-3xl text-center":"max-w-4xl",children:[r&&(0,a.jsx)("p",{className:"text-2xl font-medium uppercase text-primary",children:r}),(0,a.jsx)("h2",{style:{lineHeight:"1.2em"},className:`${n?"lineHeight text-3xl lg:text-[55px]":"text-3xl"} mb-5 font-medium`,...c,children:e}),t&&(0,a.jsx)("p",{className:"mt-5 text-neutral-500",children:t})]}),o&&!l&&(0,a.jsx)("div",{className:"mt-4 flex shrink-0 justify-end sm:ml-2 sm:mt-0",children:(0,a.jsx)(i.default,{...c})})]})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11147:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(60687),i=r(43210),s=r.n(i);let l=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}),n=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}),o=({className:e="",onClickNext:t=()=>{},onClickPrev:r=()=>{},btnClassName:i="w-12 h-12",disableNext:o,disablePrev:c})=>{let[d,u]=s().useState("right");return(0,a.jsxs)("div",{className:`nc-NextPrev relative flex items-center ${e}`,children:[(0,a.jsx)("button",{type:"button",className:`${i} mr-2 flex items-center justify-center rounded-full border ${"left"===d?"border-primary bg-primary text-white":"border-slate-700"}`,onClick:e=>{e.preventDefault(),r()},title:"Prev",disabled:c,onMouseEnter:()=>u("left"),children:(0,a.jsx)(l,{className:"h-5 w-5"})}),(0,a.jsx)("button",{type:"button",className:`${i} flex items-center justify-center rounded-full border ${"right"===d?"border-primary bg-primary text-white":"border-slate-700"}`,onClick:e=>{e.preventDefault(),t()},title:"Next",disabled:o,onMouseEnter:()=>u("right"),children:(0,a.jsx)(n,{className:"h-5 w-5"})})]})}},11997:e=>{"use strict";e.exports=require("punycode")},13173:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(60687),i=r(43210),s=r(37590),l=r(79481),n=r(9140),o=r(45418),c=r(37644),d=r(22254),u=r(90296);function m(e){return(0,u.k5)({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M15 8h.01"},child:[]},{tag:"path",attr:{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"},child:[]},{tag:"path",attr:{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4"},child:[]},{tag:"path",attr:{d:"M14 14l1 -1c.67 -.644 1.45 -.824 2.182 -.54"},child:[]},{tag:"path",attr:{d:"M16 19h6"},child:[]},{tag:"path",attr:{d:"M19 16v6"},child:[]}]})(e)}var p=r(12850),h=r(25495);let g=["image/jpeg","image/png","image/webp","image/gif"],x=({onChange:e,value:t,bucket:r="products"})=>{let[s,n]=(0,i.useState)(!1),[o,c]=(0,i.useState)(0),[d,u]=(0,i.useState)(null),x=(0,i.useCallback)(async t=>{if(!t.target.files?.length)return;let a=t.target.files[0];if(a){u(null),n(!0),c(0);try{if(!g.includes(a.type))throw Error(`Invalid file type ${a.type}. Allowed types: ${g.join(", ")}`);let t=new Image;await new Promise((e,r)=>{t.onload=e,t.onerror=r,t.src=URL.createObjectURL(a)});let i=Math.min(.9,Math.max(.6,1-a.size/1048576/5)),s={maxSizeMB:5,maxWidthOrHeight:Math.max(t.width,t.height)>1600?1600:void 0,useWebWorker:!0,initialQuality:i,fileType:"image/webp",preserveExif:!0,alwaysKeepResolution:!1,onProgress:e=>{c(.5*e)}},n=await (0,p.A)(a,s),o=null;for(let t=0;t<3;t++)try{c(50+Math.round(t/3*40));let a=`${(0,h.A)()}.webp`,i=`${a}`,{error:s}=await l.N.storage.from(r).upload(i,n,{contentType:"image/webp",cacheControl:"3600",upsert:!1});if(s)throw s;let{data:{publicUrl:o}}=l.N.storage.from(r).getPublicUrl(i);c(100),e(o);break}catch(e){o=e,e instanceof Error&&e.message,t<2?await new Promise(e=>setTimeout(e,1e3*(t+1))):c(-1)}if(o)throw o}catch(e){u(e instanceof Error?e.message:"Failed to process image"),c(-1)}finally{n(!1)}}},[r,e,l.N]);return(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("label",{className:"relative cursor-pointer hover:opacity-70 border-dashed border-2 border-neutral-300 flex flex-col justify-center items-center h-[200px] gap-4",children:[(0,a.jsx)("input",{type:"file",onChange:x,accept:g.join(","),className:"hidden",disabled:s}),!t&&!s&&(0,a.jsx)(m,{size:50}),(0,a.jsx)("div",{className:"font-semibold text-lg text-center",children:s?-1===o?"Upload Failed":`Processing... ${o}%`:t?"Change Image":"Click to upload"}),d&&!s&&(0,a.jsx)("div",{className:"text-red-500 text-sm absolute bottom-2 left-2 right-2 text-center bg-white/90 py-1 rounded",children:d}),t&&(0,a.jsx)("div",{className:"absolute inset-0 w-full h-full",children:(0,a.jsx)("img",{src:t,alt:"Upload",className:"w-full h-full object-cover"})})]})})};function f(){let[e,t]=(0,i.useState)(!1),[r,u]=(0,i.useState)([]),[m,p]=(0,i.useState)({name:"",description:"",image_url:"",meta_title:"",meta_description:""}),[h,g]=(0,i.useState)(null),f=(0,i.useCallback)(async()=>{try{let{data:e,error:t}=await l.N.from("categories").select("*").order("created_at",{ascending:!1});if(t)throw t;u(e||[])}catch(e){s.oR.error("Error loading categories")}},[]),v=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),b=async e=>{e.preventDefault(),t(!0);try{let{error:e}=await l.N.from("categories").insert({name:m.name,slug:v(m.name),description:m.description,image_url:m.image_url,meta_title:m.meta_title,meta_description:m.meta_description});if(e)throw e;s.oR.success("Category created successfully"),p({name:"",description:"",image_url:"",meta_title:"",meta_description:""}),f()}catch(e){s.oR.error("Error creating category")}finally{t(!1)}},y=async e=>{if(e.preventDefault(),h){t(!0);try{let{error:e}=await l.N.from("categories").update({name:h.name,slug:v(h.name),description:h.description,image_url:h.image_url,meta_title:h.meta_title,meta_description:h.meta_description}).eq("id",h.id);if(e)throw e;s.oR.success("Category updated successfully"),g(null),f()}catch(e){s.oR.error("Error updating category")}finally{t(!1)}}},w=async e=>{if(confirm("Are you sure you want to delete this category?"))try{let{error:t}=await l.N.from("categories").delete().eq("id",e);if(t)throw t;s.oR.success("Category deleted successfully"),f()}catch(e){s.oR.error("Error deleting category")}},j=e=>{g(e)};return(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)(n.A,{title:"Categories Management",children:"Manage your product categories"}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("form",{onSubmit:h?y:b,className:"space-y-4",children:[(0,a.jsx)(c.A,{placeholder:"Category Name",value:h?h.name:m.name,onChange:e=>h?g({...h,name:e.target.value}):p({...m,name:e.target.value}),required:!0}),(0,a.jsx)(d.A,{placeholder:"Description",value:h?h.description||"":m.description,onChange:e=>h?g({...h,description:e.target.value}):p({...m,description:e.target.value})}),(0,a.jsx)(c.A,{placeholder:"Meta Title",value:h?h.meta_title||"":m.meta_title,onChange:e=>h?g({...h,meta_title:e.target.value}):p({...m,meta_title:e.target.value})}),(0,a.jsx)(d.A,{placeholder:"Meta Description",value:h?h.meta_description||"":m.meta_description,onChange:e=>h?g({...h,meta_description:e.target.value}):p({...m,meta_description:e.target.value})}),(0,a.jsx)(x,{value:h?h.image_url:m.image_url,onChange:e=>{h?g({...h,image_url:e}):p({...m,image_url:e})},bucket:"categories"}),(0,a.jsx)(o.A,{type:"submit",disabled:e,className:"bg-blue-500 text-white hover:bg-blue-600",children:h?"Update Category":"Create Category"}),h&&(0,a.jsx)(o.A,{type:"button",onClick:()=>g(null),className:"ml-2 bg-gray-500 text-white hover:bg-gray-600",children:"Cancel"})]})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.description}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.image_url&&(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"h-10 w-10 object-cover rounded-md"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)(o.A,{onClick:()=>j(e),className:"bg-blue-500 text-white hover:bg-blue-600",children:"Edit"}),(0,a.jsx)(o.A,{onClick:()=>w(e.id),className:"ml-2 bg-red-500 text-white hover:bg-red-600",children:"Delete"})]})]},e.id))})]})})})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22254:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(60687),i=r(43210);let s=r.n(i)().forwardRef(({className:e="",children:t,rows:r=4,...i},s)=>(0,a.jsx)("textarea",{ref:s,className:`block w-full rounded-lg focus:ring focus:ring-transparent focus:ring-opacity-25 disabled:bg-neutral-800 ${e}`,rows:r,...i,children:t}))},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37644:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(60687),i=r(43210);let s=r.n(i)().forwardRef(({className:e="",sizeClass:t="h-11 px-4 py-3",fontClass:r="text-sm font-normal",rounded:i="rounded-full",type:s="text",...l},n)=>(0,a.jsx)("input",{ref:n,type:s,className:`block w-full focus:ring focus:ring-transparent focus:ring-opacity-25 disabled:bg-neutral-800 ${i} ${r} ${t} ${e}`,...l}))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56026:(e,t,r)=>{Promise.resolve().then(r.bind(r,92967))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},86162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=r(65239),i=r(48088),s=r(88170),l=r.n(s),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c={children:["",{children:["admin",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92967)),"C:\\Projects\\toto-minimalist\\src\\app\\admin\\categories\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"C:\\Projects\\toto-minimalist\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,33821)),"C:\\Projects\\toto-minimalist\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"C:\\Projects\\toto-minimalist\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"C:\\Projects\\toto-minimalist\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(r.bind(r,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Projects\\toto-minimalist\\src\\app\\admin\\categories\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/categories/page",pathname:"/admin/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},90306:(e,t,r)=>{Promise.resolve().then(r.bind(r,13173))},91645:e=>{"use strict";e.exports=require("net")},92967:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\toto-minimalist\\\\src\\\\app\\\\admin\\\\categories\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\toto-minimalist\\src\\app\\admin\\categories\\page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4243,3605,6945,5745,2347,8244,4036,133],()=>r(86162));module.exports=a})();