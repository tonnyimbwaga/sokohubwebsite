(()=>{var e={};e.id=1375,e.ids=[1375],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6747:(e,t,s)=>{"use strict";s.d(t,{Du:()=>n,Ml:()=>a,gO:()=>i}),process.env.NEXT_PUBLIC_FACEBOOK_PIXEL_ID;let r=(...e)=>{},i=e=>{r("track","ViewContent",e)},a=e=>{r("track","AddToCart",e)},n=e=>{r("track","Purchase",e)}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12418:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,85814,23)),Promise.resolve().then(s.t.bind(s,46533,23)),Promise.resolve().then(s.bind(s,35671))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35671:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(43210),i=s(6747);let a=({order:e,isNewPurchase:t})=>((0,r.useEffect)(()=>{if(t&&e){(0,i.Du)({content_ids:e.items.map(e=>String(e.id)),content_type:"product",num_items:e.items.reduce((e,t)=>e+t.quantity,0),order_id:String(e.id),value:e.total,currency:"KES"});let t=new URL(window.location.href);t.searchParams.has("new_purchase")&&(t.searchParams.delete("new_purchase"),window.history.replaceState({},"",t.toString()))}},[e,t]),null)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},60165:(e,t,s)=>{"use strict";s.d(t,{G:()=>r,a:()=>a});let r="/images/placeholder.png",i="https://tafojbtftmihrheeyoky.supabase.co";function a(e,t){let s;if(!e||("string"==typeof e?s=e:e&&"object"==typeof e&&(s=e.web_image_url||e.web_optimized_image_url||e.feed_image_url||e.url||e.src),!s))return r;if(s.startsWith("http")||s.startsWith("/"))return s;let a=t?.bucket||"product-images";return s.includes("../")||s.includes("..\\")?r:i?`${i}/storage/v1/object/public/${a}/${s}`:`/${a}/${s}`}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63511:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});var r=s(39398);let i=async(e,t)=>{let{timeout:s=3e4}=t||{},r=new AbortController,i=setTimeout(()=>r.abort(),s),a=await fetch(e,{...t,signal:r.signal});return clearTimeout(i),a},a=(0,r.createClient)("https://tafojbtftmihrheeyoky.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRhZm9qYnRmdG1paHJoZWV5b2t5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ3Mzk3MTYsImV4cCI6MjA2MDMxNTcxNn0.vdL2odCYREv1GykTt8wx76lmhaHmDkBYcC65L4Z_vXo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{fetch:i}})},67628:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(37413),i=s(39916),a=s(61223),n=s(44999),l=s(53384),o=s(4536),d=s.n(o),c=s(63511);async function m(e){let{data:t,error:s}=await c.N.from("orders").select(`
      id,
      customer_name,
      phone,
      delivery_zone,
      location,
      items,
      total,
      status,
      created_at,
      mpesa_phone_number,
      mpesa_transaction_code,
      is_immediate_payment,
      discount_percentage,
      original_amount,
      discounted_amount,
      payment_status,
      payment_date,
      order_confirmed,
      order_confirmation_date
    `).eq("id",e).single();return s||!t?null:t}var u=s(60165),x=s(92061);async function p({params:e,searchParams:t}){let s=(0,n.UL)(),o=(0,a.createServerComponentClient)({cookies:()=>s}),{data:{session:c}}=await o.auth.getSession(),p=await m(e.orderId);if(!p)return(0,i.notFound)();if(c?.user?.user_metadata?.role==="admin")return(0,r.jsxs)("div",{className:"container max-w-3xl py-16",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Order Details"}),(0,r.jsxs)("p",{className:"mt-2 text-gray-600",children:["Order ID: ",(0,r.jsx)("span",{className:"font-medium",children:p.id})]})]}),(0,r.jsxs)("div",{className:"space-y-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Customer Details"}),(0,r.jsxs)("dl",{className:"mt-4 space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-gray-600",children:"Name:"}),(0,r.jsx)("dd",{children:p.customer_name})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-gray-600",children:"Phone:"}),(0,r.jsx)("dd",{children:p.phone})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-gray-600",children:"Delivery Zone:"}),(0,r.jsx)("dd",{children:"nairobi"===p.delivery_zone?"Within Nairobi":"Outside Nairobi"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-gray-600",children:"Location:"}),(0,r.jsx)("dd",{children:p.location})]})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Order Summary"}),(0,r.jsx)("div",{className:"mt-4 space-y-4",children:p.items.map(e=>(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"relative aspect-square h-20 w-20 shrink-0 overflow-hidden rounded-lg bg-gray-100",children:(0,r.jsx)(l.default,{src:(0,u.a)(e.images?.[0]?.url),alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between py-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d(),{href:`/products/${e.id}`,className:"font-medium text-primary underline hover:text-primary/80",title:`View product: ${e.name}`,children:e.name}),e.size&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Size: ",e.size]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]}),(0,r.jsxs)("p",{className:"font-medium",children:["KES ",(e.price*e.quantity).toLocaleString()]})]})]})]},e.id))}),(0,r.jsx)("div",{className:"mt-6 space-y-2 border-t border-gray-100 pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between text-base font-semibold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-primary",children:["KES ",p.total.toLocaleString()]})]})})]})]})]});let h=t?.new_purchase==="true";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.default,{order:p,isNewPurchase:h}),(0,r.jsx)("div",{className:"container max-w-3xl py-16",children:(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 mb-3 leading-tight",children:"Order Confirmed!"}),(0,r.jsx)("p",{className:"text-lg text-gray-600 mb-8 max-w-xl mx-auto",children:"Thank you for your order. We will contact you shortly to arrange for delivery."}),(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 md:p-8 w-full max-w-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-3",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Payment Status:"}),(0,r.jsx)("span",{className:`font-semibold px-3 py-1 rounded-full text-sm ${"paid"===p.status||"confirmed"===p.status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:"paid"===p.status||"confirmed"===p.status?"Paid":"Pending Payment"})]}),(0,r.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Items Ordered"}),p.items.map(e=>(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"relative aspect-square h-20 w-20 shrink-0 overflow-hidden rounded-lg bg-gray-100",children:(0,r.jsx)(l.default,{src:(0,u.a)(e.images?.[0]?.url),alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between py-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d(),{href:`/products/${e.id}`,className:"font-medium text-primary underline hover:text-primary/80",title:`View product: ${e.name}`,children:e.name}),e.size&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Size: ",e.size]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]}),(0,r.jsxs)("p",{className:"font-medium",children:["KES ",(e.price*e.quantity).toLocaleString()]})]})]})]},e.id))]}),(0,r.jsxs)("div",{className:"mt-10 text-center",children:[(0,r.jsx)(d(),{href:"/",className:"w-full sm:w-auto px-8 py-3 text-lg bg-primary text-white rounded-lg hover:bg-primary/90",children:"Continue Shopping"}),(0,r.jsxs)("p",{className:"mt-4 text-sm text-gray-500",children:["If you have any questions, please contact us at ",(0,r.jsx)("a",{href:"tel:+254714645215",className:"text-primary hover:underline",children:"+254 714 645215"}),"."]})]})]})]})})]})}},74075:e=>{"use strict";e.exports=require("zlib")},78138:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4536,23)),Promise.resolve().then(s.t.bind(s,49603,23)),Promise.resolve().then(s.bind(s,92061))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92061:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\toto-minimalist\\\\src\\\\components\\\\OrderPurchaseTracker.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\toto-minimalist\\src\\components\\OrderPurchaseTracker.tsx","default")},92526:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(65239),i=s(48088),a=s(88170),n=s.n(a),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["order",{children:["[orderId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,67628)),"C:\\Projects\\toto-minimalist\\src\\app\\order\\[orderId]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,33821)),"C:\\Projects\\toto-minimalist\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,67393)),"C:\\Projects\\toto-minimalist\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,54413)),"C:\\Projects\\toto-minimalist\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,51520))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,94650))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Projects\\toto-minimalist\\src\\app\\order\\[orderId]\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/order/[orderId]/page",pathname:"/order/[orderId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4243,3605,6945,4959,4036],()=>s(92526));module.exports=r})();